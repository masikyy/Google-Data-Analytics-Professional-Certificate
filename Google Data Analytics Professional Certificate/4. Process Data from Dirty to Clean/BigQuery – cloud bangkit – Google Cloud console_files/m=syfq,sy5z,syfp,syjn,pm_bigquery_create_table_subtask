"use strict";this.default_r_tvffkgi=this.default_r_tvffkgi||{};(function(_){var window=this;
try{
var s1i,t1i,u1i,v1i,w1i,x1i,y1i,z1i,A1i,B1i,C1i,D1i,G1i,H1i,I1i,J1i,K1i,E1i,L1i;s1i=function(a){a&1&&(_.K(0),_.S(1),_.L());a&2&&(a=_.O(),_.z(1),_.U(" ",a.label," "))};t1i=function(a){if(a&1){const b=_.Hd();_.H(0,"cfc-tree-node-expander",8);_.N("onExpanderClick",function(){_.t(b);const c=_.O();return _.x(c.toggleCollapsed())});_.I()}a&2&&(a=_.O(),_.E("state",a.isCollapsed()?1:2))};
u1i=function(a){if(a&1){const b=_.Hd();_.H(0,"cfc-message",9)(1,"cfc-message-text");_.M(2,10);_.I();_.H(3,"cfc-message-actions")(4,"button",11);_.N("click",function(){_.t(b);const c=_.O();return _.x(c.toggleCollapsed())});_.M(5,12);_.I()()()}};
v1i=function(a){if(a&1){const b=_.Hd();_.H(0,"button",13);_.N("click",function(){_.t(b);const c=_.O();return _.x(c.deleteNode(c.node))});_.J(1,"cfc-icon",14);_.I()}a&2&&(a=_.O(),_.cg("focused",a.isFocused),_.E("cfcTooltip",a.deleteTooltipText)("cfcTooltipRich",!1),_.$f("aria-label",a.getDeleteRowAriaLabel()))};
w1i=function(a,b){a&1&&(_.H(0,"div",18),_.J(1,"div",19)(2,"cfc-tree-editor-node",20),_.I());a&2&&(a=b.$implicit,b=_.O(2),_.z(1),_.cg("withchildren",a.nodeType!==b.TreeEditorNodeType.LEAF)("highlighted",b.isHighlighted()),_.z(1),_.E("addLabel",b.addLabel)("deleteTooltipText",b.deleteTooltipText)("node",a)("nodeTemplate",b.nodeTemplate))};
x1i=function(a){if(a&1){const b=_.Hd();_.H(0,"div",18);_.J(1,"div",21);_.H(2,"div",22);_.S(3);_.I();_.H(4,"cfc-tree-editor-add-button",23);_.N("focusin",function(c){_.t(b);const d=_.O(2);d.treeEditor.highlightedRowID=d.node.rowID;c.stopPropagation();return _.x(void 0)})("focusout",function(c){_.t(b);const d=_.O(2);return _.x(d.onFocusOut(c))})("onAdd",function(){_.t(b);const c=_.O(2);return _.x(c.addChild(c.node))});_.I()()}a&2&&(a=_.O(2),_.z(1),_.cg("highlighted",a.isHighlighted()),_.z(2),_.zg(a.nextNodeNumber),
_.z(1),_.E("label",a.addLabel)("ariaLabel",_.Ij("Add node {ROW_ID}",{ROW_ID:a.nextNodeNumber}))("showLabel",a.isHighlighted()))};y1i=function(a){a&1&&(_.H(0,"div",15),_.R(1,w1i,3,8,"div",16),_.R(2,x1i,5,6,"div",17),_.I());a&2&&(a=_.O(),_.cg("highlighted",a.isHighlighted()),_.z(1),_.E("ngForOf",a.node.children)("ngForTrackBy",a.trackByRowID),_.z(1),_.E("ngIf",a.canHaveChildren()))};
z1i=function(a){a&1&&_.J(0,"div",5);if(a&2){a=_.O().$implicit;const b=_.O();_.cg("withchildren",a.nodeType!==b.TreeEditorNodeType.LEAF)("highlighted",b.isHighlighted())}};A1i=function(a,b){a&1&&(_.H(0,"div",2),_.R(1,z1i,1,4,"div",3),_.J(2,"cfc-tree-editor-node",4),_.I());a&2&&(a=b.$implicit,b=_.O(),_.z(1),_.E("ngIf",!0),_.z(1),_.E("addLabel",b.addNodeLabel)("deleteTooltipText",b.deleteNodeTooltipText)("node",a)("nodeTemplate",b.nodeTemplateRef))};
B1i=function(a){a&1&&(_.H(0,"div",9),_.S(1),_.I());a&2&&(a=_.O(2),_.z(1),_.U(" ",a.nextNodeNumber," "))};
C1i=function(a){if(a&1){const b=_.Hd();_.H(0,"div",2);_.J(1,"div",6);_.R(2,B1i,2,1,"div",7);_.H(3,"cfc-tree-editor-add-button",8);_.N("focusin",function(){_.t(b);const c=_.O();return _.x(c.highlightedRowID="root")})("onAdd",function(){_.t(b);const c=_.O();return _.x(c.addChild())});_.I()()}a&2&&(a=_.O(),_.z(1),_.cg("highlighted",a.isHighlighted()),_.z(1),_.E("ngIf",a.nodeComponents&&0<a.nodeComponents.length),_.z(1),_.E("label",a.addNodeLabel)("ariaLabel",_.Ij("Add node {ROW_ID}",{ROW_ID:a.nextNodeNumber}))("showLabel",
a.isHighlighted()))};_.F1i=function(a,b,c,d){const e=a.array([]);d=d||e;for(const f of b)e.push(D1i(a,f,c,d));if(c.uniqueNodeControlName)for(const f of e.controls)a=f.get("value"),E1i(a,e,d,c.uniqueNodeControlName,c.uniquenessConstraint||0);return e};D1i=function(a,b,c,d){d=_.F1i(a,b.children||[],c,d);b=c.createFormGroup(a,b.value);return a.group({value:b,children:d})};G1i=function(a,b){b=[b];a.validator&&b.unshift(a.validator);a.setValidators(b);a.updateValueAndValidity()};
H1i=function(a,b){return c=>c.value?1===a.controls.map(d=>d.get("value").get(b).value).filter(d=>d===c.value).length?null:{cfcTreeEditorNotUnique:!0}:null};I1i=function(a,b){return c=>{if(!c.value)return null;const d=[...a.controls];for(;0<d.length;){var e=d.pop();const f=e.get("value").get(b);if(c!==f&&f.value===c.value)return{cfcTreeEditorNotUnique:!0};e=e.get("children");d.push(...e.controls)}return null}};
J1i=function(a,b,c){a.controls.map(d=>d.get("value")).map(d=>d.get(b)).forEach(d=>{(!c||c&&d!==c)&&d.updateValueAndValidity({emitEvent:!1})})};K1i=function(a,b,c){for(a=[...a.controls];0<a.length;){var d=a.pop();const e=d.get("value").get(b);(!c||c&&e!==c)&&e.updateValueAndValidity({emitEvent:!1});d=d.get("children");a.push(...d.controls)}};
E1i=function(a,b,c,d,e){const f=a.get(d);if(!f)throw Error("et`"+d);0===e?(G1i(f,H1i(b,d)),f.valueChanges.subscribe(()=>{setTimeout(()=>{J1i(b,d,f)})})):(G1i(f,I1i(c,d)),f.valueChanges.subscribe(()=>{setTimeout(()=>{K1i(c,d,f)})}))};L1i={OBJECT:"OBJECT",ARRAY:"ARRAY",LEAF:"LEAF"};var M1i=class{constructor(){this.onAdd=new _.Yo}ngOnInit(){}addChild(){this.onAdd.emit()}focus(){this.button.focus()}};M1i.\u0275fac=function(a){return new (a||M1i)};
M1i.\u0275cmp=_.n({type:M1i,selectors:[["cfc-tree-editor-add-button"]],viewQuery:function(a,b){a&1&&_.Rg(_.Vs,5);if(a&2){let c;_.Qg(c=_.Tg())&&(b.button=c.first)}},inputs:{label:"label",showLabel:"showLabel",ariaLabel:"ariaLabel"},outputs:{onAdd:"onAdd"},decls:3,vars:5,consts:[["mat-button","","type","button","cfcTooltipPosition","right",1,"cfc-color-secondary","cfc-tree-editor-add-child",3,"cfcTooltip","cfcTooltipDisabled","cfcTooltipRich","click"],["icon","create","size","small"],[4,"ngIf"]],template:function(a,
b){a&1&&(_.H(0,"button",0),_.N("click",function(){return b.addChild()}),_.J(1,"cfc-icon",1),_.R(2,s1i,2,1,"ng-container",2),_.I());if(a&2){let c;_.E("cfcTooltip",b.label)("cfcTooltipDisabled",b.showLabel)("cfcTooltipRich",!1);_.$f("aria-label",null!==(c=b.ariaLabel)&&void 0!==c?c:b.label);_.z(2);_.E("ngIf",b.showLabel)}},dependencies:[_.Dv,_.kp,_.us,_.uw,_.Vs,_.tw,_.Vw],encapsulation:2});var N1i=function(a){return{$implicit:a}},O1i=new _.wd("TreeEditor"),P1i=class{constructor(a,b,c){this.treeEditor=a;this.liveAnnouncer=b;this.elementRef=c;this.rowIdWithoutPrefix="";this.TreeEditorNodeType=L1i;this.isFocused=!1;this.nodeComponents=new _.Ug}ngOnInit(){this.rowIdWithoutPrefix=this.node.rowID.substring(5)}deleteNode(a){this.liveAnnouncer.announce("Node removed.");this.treeEditor.deleteNode(a)}addChild(a){this.treeEditor.addChild(a.group,a)}canHaveChildren(){return"LEAF"!==this.node.nodeType}isCollapsed(){return this.treeEditor.isCollapsed(this.node)}toggleCollapsed(){this.treeEditor.setCollapsed(this.node,
!this.isCollapsed())}trackByRowID(a,b){return b.rowID}onFocusIn(a){this.isFocused=!0;const b=this.node.rowID.substring(0,this.node.rowID.lastIndexOf("."));this.treeEditor.highlightedRowID=b;a.stopPropagation()}onFocusOut(a){this.isFocused=!1;this.treeEditor.highlightedRowID=void 0;a.stopPropagation()}isHighlighted(){return this.node.rowID===this.treeEditor.highlightedRowID}getDeleteRowAriaLabel(){return _.Ij("Delete resource. Row {ROW_ID}",{ROW_ID:this.rowIdWithoutPrefix})}get nextNodeNumber(){return`${this.rowIdWithoutPrefix}.${this.nodeComponents.length+
1}`}focusFirstFocusableElement(){let a;null==(a=_.ji(this.elementRef.nativeElement,!0)[0])||a.focus()}};P1i.\u0275fac=function(a){return new (a||P1i)(_.A(O1i),_.A(_.ur),_.A(_.Xd))};
P1i.\u0275cmp=_.n({type:P1i,selectors:[["cfc-tree-editor-node"]],viewQuery:function(a,b){a&1&&(_.Rg(M1i,5),_.Rg(P1i,5));if(a&2){let c;_.Qg(c=_.Tg())&&(b.addButton=c.first);_.Qg(c=_.Tg())&&(b.nodeComponents=c)}},hostBindings:function(a,b){a&1&&_.N("focusin",function(c){return b.onFocusIn(c)})("focusout",function(c){return b.onFocusOut(c)})},inputs:{nodeTemplate:"nodeTemplate",node:"node",addLabel:"addLabel",deleteTooltipText:"deleteTooltipText"},decls:9,vars:11,consts:function(){return[["fxLayout",
"row","role","group",1,"cfc-tree-editor-node"],["class","cfc-tree-editor-expander",3,"state","onExpanderClick",4,"ngIf"],[1,"cfc-tree-editor-node-index",3,"id"],["fxFlex","0 0 auto",1,"cfc-tree-editor-node-outlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","error",4,"ngIf"],["mat-icon-button","","type","button","class","cfc-tree-editor-delete","cfcTooltipPosition","right",3,"focused","cfcTooltip","cfcTooltipRich","click",4,"ngIf"],["class","cfc-tree-editor-vertical-guide-line",3,"highlighted",
4,"ngIf"],[1,"cfc-tree-editor-expander",3,"state","onExpanderClick"],["type","error"]," One or more collapsed fields need your attention. Expand for details. ",["mat-raised-button","",3,"click"]," Show ",["mat-icon-button","","type","button","cfcTooltipPosition","right",1,"cfc-tree-editor-delete",3,"cfcTooltip","cfcTooltipRich","click"],["icon","delete","size","small"],[1,"cfc-tree-editor-vertical-guide-line"],["fxLayout","row",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row",4,"ngIf"],["fxLayout",
"row"],[1,"cfc-tree-editor-horizontal-guide"],[3,"addLabel","deleteTooltipText","node","nodeTemplate"],[1,"cfc-tree-editor-add-child-horizontal-guide"],[1,"cfc-tree-editor-add-child-index"],[3,"label","ariaLabel","showLabel","focusin","focusout","onAdd"]]},template:function(a,b){a&1&&(_.H(0,"div",0),_.R(1,t1i,1,1,"cfc-tree-node-expander",1),_.H(2,"div",2),_.S(3),_.I(),_.H(4,"div",3),_.jg(5,4),_.R(6,u1i,6,0,"cfc-message",5),_.I(),_.R(7,v1i,2,5,"button",6),_.I(),_.R(8,y1i,3,5,"div",7));if(a&2){_.$f("aria-labelledby",
b.rowIdWithoutPrefix);_.z(1);_.E("ngIf",b.canHaveChildren());_.z(1);_.E("id",b.rowIdWithoutPrefix);_.z(1);_.zg(b.rowIdWithoutPrefix);_.z(2);a=_.E("ngTemplateOutlet",b.nodeTemplate);var c={parentNodeType:b.node.parentNodeType,id:b.node.rowID,formGroup:b.node.group.get("value"),indexInParent:b.node.indexInParent,isTopLevel:!b.node.parent,level:b.node.level};a("ngTemplateOutletContext",_.Fg(9,N1i,c));_.z(1);_.E("ngIf",b.isCollapsed()&&!b.node.group.get("children").valid);_.z(1);_.E("ngIf",b.node.canBeDeleted);
_.z(1);_.E("ngIf",!b.isCollapsed())}},dependencies:[_.Dv,_.jp,_.kp,_.pp,_.dG,_.fG,_.us,_.uw,_.Vs,_.Xs,_.tw,_.vs,_.xs,_.ws,_.Vw,_.rXc,P1i,M1i],styles:['.cfc-tree-editor-add-child-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-disabled,rgba(0,0,0,.54));font:var(--cm-sys-type-title-small-font,400 18px/24px "Roboto");padding-top:4px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{border-left-width:1px;border-style:solid;-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%}.cfc-tree-editor-vertical-guide-line.highlighted[_ngcontent-%COMP%]{-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{width:24px;min-width:24px;margin-right:4px;border-top:var(--cm-sys-color-hairline,rgba(0,0,0,.12)) solid 1px}.cfc-tree-editor-add-child-horizontal-guide.highlighted[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.highlighted[_ngcontent-%COMP%]{border-top-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}.cfc-tree-editor-add-child-horizontal-guide.withchildren[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.withchildren[_ngcontent-%COMP%]{width:4px;min-width:4px}.cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{margin-top:27px}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%]{margin-top:16px}.cfc-tree-editor-node-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-disabled,rgba(0,0,0,.54));font:var(--cm-sys-type-title-small-font,400 18px/24px "Roboto");padding-top:16px;padding-right:4px}.cm-button.cfc-tree-editor-delete[_ngcontent-%COMP%]{--cm-icon-button-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));opacity:0;margin-top:8px}.cm-button.cfc-tree-editor-delete.focused[_ngcontent-%COMP%]{opacity:1}.cfc-tree-editor-node[_ngcontent-%COMP%]:hover   .cfc-tree-editor-delete[_ngcontent-%COMP%]{opacity:1}.cfc-tree-editor-expander[_ngcontent-%COMP%]{margin-top:16px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{margin-left:8px}.cfc-tree-editor-node-outlet[_ngcontent-%COMP%]{margin-top:4px}']});var R1i,S1i,T1i;_.Q1i=class{constructor(a){this.template=a}};_.Q1i.\u0275fac=function(a){return new (a||_.Q1i)(_.A(_.Ng))};_.Q1i.\u0275dir=_.pd({type:_.Q1i,selectors:[["","cfcTreeEditorTemplate",""]]});
R1i=function(a,b){b.get("value").valueChanges.pipe(_.Mf(a.destroy),_.Jf(b.get("value").value),_.D(c=>({value:c,canHaveChildren:a.canHaveChildren(a.manager.getNodeType(c))})),_.lf((c,d)=>c.canHaveChildren===d.canHaveChildren),_.zf()).subscribe(([,c])=>{if(!a.isDeletingNode)if(c.canHaveChildren)a.addChild(b,void 0,c.value);else{for(c=b.get("children");c.length;)c.removeAt(0);_.va(a.collapsedNodes,b)}});for(const c of b.get("children").controls)R1i(a,c)};
S1i=function(a,b){setTimeout(()=>{if(b){for(var c=[],d=b;d;)c.push(d.indexInParent),d=d.parentNode;if(0!==c.length){for(d=a.nodeComponents.get(c.pop());0<c.length;)d=d.nodeComponents.get(c.pop());d&&d.nodeComponents.get(d.nodeComponents.length-1).focusFirstFocusableElement()}}else(c=a.nodeComponents.get(a.nodeComponents.length-1))&&c.focusFirstFocusableElement()})};
T1i=function(a,b,c,d,e,f,g){return c.controls.map((l,p)=>{const u=`${b}${p+1}`;p={rowID:u,children:[],group:l,nodeType:a.manager.getNodeType(l.get("value").value),parent:f,parentNodeType:d,indexInParent:p,canBeDeleted:!0,level:e,parentNode:g};p.children.push(...T1i(a,`${u}.`,l.get("children"),a.manager.getNodeType(l.get("value").value),e+1,l,p));return p})};
_.U1i=class{constructor(a,b){this.fb=a;this.cdref=b;this.addNodeLabel="Add node";this.deleteNodeTooltipText="Delete node";this.nodeComponents=new _.Ug;this.TreeEditorNodeType=L1i;this.collapsedNodes=[];this.destroy=new _.Ef;this.isDeletingNode=!1}ngOnInit(){for(const a of this.nodesFormArray.controls)R1i(this,a);this.nodesFormArray.valueChanges.pipe(_.Mf(this.destroy)).subscribe(()=>{this.nodes=T1i(this,"root.",this.nodesFormArray,"OBJECT",0)});this.nodes=T1i(this,"root.",this.nodesFormArray,"OBJECT",
0)}addChild(a,b,c){var d=a?a.value:void 0;c&&(d.value=c);c=this.manager.createChild(a?d:void 0);a=a?a.get("children"):this.nodesFormArray;c=D1i(this.fb,{value:c},this.manager,this.nodesFormArray);R1i(this,c);a.push(c);this.manager.uniqueNodeControlName&&(d=this.manager.uniquenessConstraint||0,E1i(c.get("value"),a,this.nodesFormArray,this.manager.uniqueNodeControlName,d));S1i(this,b);this.cdref.detectChanges()}setCollapsed(a,b){a=a.group;b?_.Caa(this.collapsedNodes,a):_.va(this.collapsedNodes,a)}isCollapsed(a){return _.ua(this.collapsedNodes,
a.group)}deleteNode(a){this.isDeletingNode=!0;const b=a.parent?a.parent.get("children"):this.nodesFormArray;b.removeAt(a.indexInParent);this.manager.uniqueNodeControlName&&(0===(this.manager.uniquenessConstraint||0)?J1i(b,this.manager.uniqueNodeControlName):K1i(this.nodesFormArray,this.manager.uniqueNodeControlName));this.isDeletingNode=!1;this.moveFocusOnDelete(a);this.cdref.detectChanges()}ngAfterContentInit(){this.nodeTemplateRef=this.nodeTemplate.template;this.cdref.detectChanges()}ngOnDestroy(){this.destroy.next()}trackByRowID(a,
b){return b.rowID}isHighlighted(){return"root"===this.highlightedRowID}get nextNodeNumber(){return this.nodeComponents.length+1}moveFocusOnDelete(a){setTimeout(()=>{const b=[];for(var c=a;c;)b.push(c.indexInParent),c=c.parentNode;c=this.addBtn;let d=this.nodeComponents.get(b.pop());for(;0<b.length;)c=d.addButton,d=d.nodeComponents.get(b.pop());d?d.focusFirstFocusableElement():c.focus()})}canHaveChildren(a){return"LEAF"!==a}};_.U1i.\u0275fac=function(a){return new (a||_.U1i)(_.A(_.qw),_.A(_.dp))};
_.U1i.\u0275cmp=_.n({type:_.U1i,selectors:[["cfc-tree-editor"]],contentQueries:function(a,b,c){a&1&&_.Sg(c,_.Q1i,5);if(a&2){let d;_.Qg(d=_.Tg())&&(b.nodeTemplate=d.first)}},viewQuery:function(a,b){a&1&&(_.Rg(M1i,5),_.Rg(P1i,5));if(a&2){let c;_.Qg(c=_.Tg())&&(b.addBtn=c.first);_.Qg(c=_.Tg())&&(b.nodeComponents=c)}},inputs:{manager:"manager",nodesFormArray:"nodesFormArray",addNodeLabel:"addNodeLabel",deleteNodeTooltipText:"deleteNodeTooltipText"},features:[_.Bg([{provide:O1i,useExisting:_.U1i}])],decls:3,
vars:7,consts:[["fxLayout","row",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["class","cfc-tree-editor-horizontal-guide",3,"withchildren","highlighted",4,"ngIf"],[3,"addLabel","deleteTooltipText","node","nodeTemplate"],[1,"cfc-tree-editor-horizontal-guide"],[1,"cfc-tree-editor-add-child-horizontal-guide"],["class","cfc-tree-editor-add-child-index",4,"ngIf"],[3,"label","ariaLabel","showLabel","focusin","onAdd"],[1,"cfc-tree-editor-add-child-index"]],template:function(a,
b){a&1&&(_.H(0,"div"),_.R(1,A1i,3,5,"div",0),_.R(2,C1i,4,6,"div",1),_.I());a&2&&(_.cg("cfc-tree-editor-vertical-guide-line",!0)("highlighted",b.isHighlighted()),_.z(1),_.E("ngForOf",b.nodes)("ngForTrackBy",b.trackByRowID),_.z(1),_.E("ngIf",!0))},dependencies:[_.jp,_.kp,_.dG,P1i,M1i],styles:['.cfc-tree-editor-add-child-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-disabled,rgba(0,0,0,.54));font:var(--cm-sys-type-title-small-font,400 18px/24px "Roboto");padding-top:4px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{border-left-width:1px;border-style:solid;-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%}.cfc-tree-editor-vertical-guide-line.highlighted[_ngcontent-%COMP%]{-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{width:24px;min-width:24px;margin-right:4px;border-top:var(--cm-sys-color-hairline,rgba(0,0,0,.12)) solid 1px}.cfc-tree-editor-add-child-horizontal-guide.highlighted[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.highlighted[_ngcontent-%COMP%]{border-top-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}.cfc-tree-editor-add-child-horizontal-guide.withchildren[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.withchildren[_ngcontent-%COMP%]{width:4px;min-width:4px}.cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{margin-top:27px}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%]{margin-top:16px}']});_.V1i=class{};_.V1i.\u0275fac=function(a){return new (a||_.V1i)};_.V1i.\u0275mod=_.r({type:_.V1i,id:"pm_tree_editor"});_.V1i.\u0275inj=_.k({imports:[_.Lv,_.wp,_.hG,_.Es,_.vw,_.Fs,_.Xw,_.cJ]});_.Vf(_.V1i,"pm_tree_editor");
}catch(e){_._DumpException(e)}
try{
var aVe=function(a){return b=>b.value&&b.value.length?a.some(c=>b.value[0].name.toLowerCase().endsWith(c))?null:{invalidFileType:{valid:!1}}:null},bVe=function(a){if(a&1){const b=_.Hd();_.H(0,"button",2);_.N("click",function(){_.t(b);const c=_.O();var d=c.filePicker,e=[];d.value=e;d.onChange(e);d.updateView(e);c.shouldShowDeleteButton=!1;return _.x(void 0)});_.J(1,"cfc-icon",3);_.I()}a&2&&(a=_.O(),_.E("cmNativeDisabled",a.shouldDisableButtons),_.$f("aria-label",a.deleteButtonAriaLabel))},cVe=0,dVe=
class{constructor(a){this.element=a}},fVe;dVe.\u0275fac=function(a){return new (a||dVe)(_.A(_.Xd))};dVe.\u0275dir=_.pd({type:dVe,selectors:[["input","matInput",""]]});var eVe=class{constructor(a){this.element=a}};eVe.\u0275fac=function(a){return new (a||eVe)(_.A(_.Xd))};eVe.\u0275dir=_.pd({type:eVe,selectors:[["input","type","file"]]});
_.mV=class extends _.cy{constructor(a,b,c,d,e){super("cfc-file-picker",e,cVe++,[]);this.cdr=a;this.defaultErrorStateMatcher=b;this.parentForm=c;this.parentFormGroup=d;this.acceptedFileTypes=null;this.inputAriaLabel="Selected files";this.buttonsDisabledStateChangeRequested=new _.lh(!1);this.controlType="cfc-file-picker";this.ariaDisabled=!1;this.deleteButtonVisibilityChangeRequested=new _.lh(!1);this.ngControl&&(this.ngControl.valueAccessor=this)}ngAfterViewInit(){if(this.acceptedFileTypes&&this.ngControl&&
this.ngControl.control){const a=this.ngControl.control;a.setValidators(_.Tj([a.validator,aVe(this.acceptedFileTypes.toLowerCase().split(","))]))}}ngDoCheck(){this.ngControl&&this.updateErrorState()}ngOnDestroy(){this.stateChanges.complete()}onContainerClick(){}writeValue(a){a instanceof Array&&(this.value=a,this.updateView(a))}onFocus(){this.focused=!0}onBlur(){this.focused=!1}getEmpty(){return 0===this.value.length}getErrorStateMatcher(){return this.errorStateMatcher||this.defaultErrorStateMatcher}getParentForm(){return this.parentForm||
this.parentFormGroup}setDisabled(a){this.disabledInternal=_.Gh(a);this.buttonsDisabledStateChangeRequested.next(this.disabledInternal);this.stateChanges.next();this.cdr.markForCheck()}updateView(a){this.materialInput.element.nativeElement.value=a.length?a[0].name:"";0===a.length&&this.fileInput&&(this.fileInput.element.nativeElement.value="");this.deleteButtonVisibilityChangeRequested.next(a.length?!0:!1)}};
_.mV.\u0275fac=function(a){return new (a||_.mV)(_.A(_.dp),_.A(_.Sr),_.A(_.Yv,8),_.A(_.fw,8),_.A(_.Sv,10))};
_.mV.\u0275cmp=_.n({type:_.mV,selectors:[["cfc-file-picker"]],viewQuery:function(a,b){a&1&&(_.Rg(eVe,5),_.Rg(dVe,7));if(a&2){let c;_.Qg(c=_.Tg())&&(b.fileInput=c.first);_.Qg(c=_.Tg())&&(b.materialInput=c.first)}},hostVars:2,hostBindings:function(a,b){a&2&&_.$f("aria-describedby",b.ariaDescribedBy||null)("id",b.id)},inputs:{acceptedFileTypes:"acceptedFileTypes",inputAriaLabel:"inputAriaLabel"},features:[_.Bg([{provide:_.yu,useExisting:_.mV}]),_.Wf],decls:3,vars:6,consts:[["matInput","","aria-readonly",
"true","readonly","","role","textbox","cmDisabledMode","native",3,"disabled","placeholder","focus","blur"],["aria-hidden","true","type","file",1,"cfc-file-picker-file-input",3,"change","keyup.tab"],["fileInput",""]],template:function(a,b){if(a&1){const c=_.Hd();_.H(0,"input",0);_.N("focus",function(){return b.onFocus()})("blur",function(){return b.onBlur()});_.I();_.H(1,"input",1,2);_.N("change",function(){_.t(c);var d=_.yg(2).files;d=d?Array.from(d):[];b.value=d;b.onChange(d);b.updateView(d);return _.x(void 0)})("keyup.tab",
function(){b.onTouched()});_.I()}a&2&&(_.E("disabled",b.disabled)("placeholder",b.placeholder),_.$f("aria-label",b.inputAriaLabel)("aria-disabled",b.ariaDisabled)("tabindex",b.empty||b.disabled||b.ariaDisabled?-1:0),_.z(1),_.$f("accept",b.acceptedFileTypes))},dependencies:[_.my,_.ny,_.ky,eVe,dVe],styles:[".cfc-file-picker-file-input{display:none}.cfc-file-picker-buttons-delete-button{display:inline-block}"],encapsulation:2,changeDetection:0});
fVe=function(a){a.filePicker.fileInput.element.nativeElement.click();a.onBrowseButtonFocused.pipe(_.nf(1)).subscribe(()=>{a.filePicker.onTouched()})};
_.nV=class{constructor(a){this.cdr=a;this.browseButtonText="Browse";this.browseAriaLabel="Browse files";this.deleteButtonAriaLabel="Clear file selection";this.shouldDisableButtons=this.shouldShowDeleteButton=!1;this.onBrowseButtonFocused=new _.Yo;this.destroy=new _.Ef}ngOnInit(){this.filePicker.deleteButtonVisibilityChangeRequested.pipe(_.Mf(this.destroy)).subscribe(a=>{this.shouldShowDeleteButton=a;this.cdr.markForCheck()});this.filePicker.buttonsDisabledStateChangeRequested.pipe(_.Mf(this.destroy)).subscribe(a=>
{this.shouldDisableButtons=a;this.cdr.markForCheck()})}ngOnDestroy(){this.destroy.next()}};_.nV.\u0275fac=function(a){return new (a||_.nV)(_.A(_.dp))};
_.nV.\u0275cmp=_.n({type:_.nV,selectors:[["cfc-file-picker-buttons"]],inputs:{browseButtonText:"browseButtonText",browseAriaLabel:"browseAriaLabel",deleteButtonAriaLabel:"deleteButtonAriaLabel",filePicker:"filePicker"},decls:3,vars:4,consts:[["mat-icon-button","","class","cfc-file-picker-buttons-delete-button","type","button",3,"cmNativeDisabled","click",4,"ngIf"],["mat-button","","type","button","color","primary",1,"cfc-file-picker-buttons-browse-button",3,"cmDisabled","click","focus"],["mat-icon-button",
"","type","button",1,"cfc-file-picker-buttons-delete-button",3,"cmNativeDisabled","click"],["icon","close","size","small"]],template:function(a,b){a&1&&(_.R(0,bVe,2,2,"button",0),_.H(1,"button",1),_.N("click",function(){return fVe(b)})("focus",function(){return b.onBrowseButtonFocused.emit()}),_.S(2),_.I());a&2&&(_.E("ngIf",b.shouldShowDeleteButton),_.z(1),_.E("cmDisabled",b.shouldDisableButtons),_.$f("aria-label",b.browseAriaLabel),_.z(1),_.U(" ",b.browseButtonText,"\n"))},dependencies:[_.uw,_.Vs,
_.Xs,_.tw,_.kp,_.us],styles:[".cfc-file-picker-file-input{display:none}.cfc-file-picker-buttons-delete-button{display:inline-block}"],encapsulation:2,changeDetection:0});_.oV=class{};_.oV.\u0275fac=function(a){return new (a||_.oV)};_.oV.\u0275mod=_.r({type:_.oV});_.oV.\u0275inj=_.k({imports:[_.vw,_.oy,_.wp,_.rw,_.Es]});
}catch(e){_._DumpException(e)}
try{
var W1i,Y1i,b2i,a2i,X1i,Z1i,$1i,j2i,k2i,l2i,m2i,n2i,o2i,r2i,s2i,t2i,u2i,v2i,w2i,x2i,y2i,z2i,A2i,B2i,C2i,D2i,E2i,F2i,G2i,H2i,I2i,J2i,L2i,M2i,N2i,O2i,S2i,P2i,V2i,X2i,q2i,Y2i,v6,Z2i;W1i=function(a,b={}){return"string"===typeof a?a:a.format(b)};Y1i=function(a,b){return X1i(a)?b?JSON.stringify(b.fromSchema(a),null,4):JSON.stringify(a,null,4):a.map(({name:c,type:d})=>`${c}:${d}`).join(",\n")};b2i=function(a,b){a=/^\s*\[/.test(a)?Z1i(a,b):$1i(a);if(Array.isArray(a))for(const c of a){const d=a2i(c,b);if(d)return d}return a};
a2i=function(a,b){a.name=a.name||"";a.type=(a.type||"STRING").toUpperCase();if(!v6.currentSupportedTypes.includes(a.type))return W1i(c2i,{type:a.type,types:v6.currentSupportedTypes.join(", ")});if((b&&b.fieldKeys||d2i).includes("mode")&&(a.mode=(a.mode||"NULLABLE").toUpperCase(),!_.e2i.includes(a.mode)))return W1i(f2i,{mode:a.mode,modes:_.e2i.join(", ")});if(null!=a.fields)for(const c of a.fields)a2i(c)};
X1i=function(a){return a.some(b=>b.mode&&"NULLABLE"!==b.mode||"RECORD"===(b.type||"").toUpperCase()||b.maxLength||b.precision||b.scale||b.roundingMode?!0:!!b.description)};Z1i=function(a,b){try{const c=JSON.parse(a),d=b&&b.fieldKeys||d2i;for(const e of c){const f=Object.keys(e).filter(g=>!d.includes(g));if(0<f.length)return W1i(g2i,{allKeys:d.join(", "),unknownKeys:f.join(", ")})}return b?b.toSchema(JSON.parse(a)):JSON.parse(a)}catch(c){return W1i(h2i,{message:c.message})}};
$1i=function(a){const b=[];if(a=a.trim()){a=a.split(",");for(const d of a){var c=d.split(":");if(2<c.length)return W1i(i2i,{format:d});a=c[0].trim();c=2===c.length?c[1].trim().toUpperCase():"STRING";if("RECORD"===c)return W1i("RECORD type is not supported in simple schema syntax. Use JSON syntax instead");const e=j2i();if(!e.includes(c))return W1i(c2i,{type:c,types:e.join(", ")});b.push({name:a,type:c})}}return b};j2i=function(){return v6.currentSupportedTypes.filter(a=>"RECORD"!==a)};
k2i=function(a){a&1&&(_.H(0,"mat-slide-toggle",4),_.M(1,5),_.I())};l2i=function(a){a&1&&(_.H(0,"span"),_.S(1),_.I());a&2&&(a=_.O(2),_.z(1),_.U(" ",a.code.errors.schemaError," "))};m2i=function(a){a&1&&(_.K(0),_.J(1,"cfc-code-editor",6),_.H(2,"cfc-form-error",7),_.R(3,l2i,2,1,"span",2),_.I(),_.L());a&2&&(a=_.O(),_.z(1),_.E("height",a.CODE_EDITOR_HEIGHT)("options",a.testEditorOptions),_.z(1),_.E("control",a.code),_.z(1),_.E("ngIf",a.code.errors))};
n2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,24),_.I());a&2&&(a=_.O(3),_.z(1),_.og(a.fieldNameMaxLength),_.pg(1))};o2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,25),_.I())};r2i=function(a){a&1&&(_.H(0,"cm-error",23),_.S(1),_.I());a&2&&(_.O(3),_.z(1),_.U(" ",p2i.format({url:_.Yj(q2i)})," "))};s2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,26),_.I())};t2i=function(a,b){a&1&&(_.H(0,"mat-option",27),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",a," "))};
u2i=function(a){a&1&&(_.H(0,"mat-option",27),_.S(1),_.I());a&2&&(a=_.O(3),_.E("value",a.field.controls.type.value),_.z(1),_.U(" ",a.field.controls.type.value," "))};v2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,28),_.I())};w2i=function(a,b){a&1&&(_.H(0,"mat-option",27),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",a," "))};
x2i=function(a){a&1&&(_.H(0,"mat-form-field",16)(1,"mat-label"),_.M(2,29),_.I(),_.H(3,"cfc-select",30),_.R(4,w2i,2,2,"mat-option",19),_.I()());a&2&&(a=_.O(3),_.z(4),_.E("ngForOf",a.modes))};y2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,33),_.I());a&2&&(a=_.O(4),_.z(1),_.og(a.VALUE_TEMPLATE_MAX_LENGTH),_.pg(1))};
z2i=function(a){a&1&&(_.H(0,"mat-form-field",16)(1,"mat-label"),_.M(2,31),_.I(),_.H(3,"textarea",32),_.S(4," "),_.I(),_.R(5,y2i,2,1,"cm-error",15),_.I());a&2&&(_.z(3),_.E("rows",2),_.z(2),_.E("cfcDebounceErrorFor","maxlength"))};A2i=function(a){a&1&&(_.H(0,"cm-error",23),_.S(1,"Max length must be a number."),_.I())};B2i=function(a){a&1&&(_.H(0,"mat-form-field",34)(1,"mat-label"),_.M(2,35),_.I(),_.J(3,"input",36),_.R(4,A2i,2,0,"cm-error",15),_.I());a&2&&(_.z(4),_.E("cfcDebounceErrorFor","number"))};
C2i=function(a){a&1&&(_.H(0,"cm-error",23),_.S(1,"Precision must be a number."),_.I())};D2i=function(a){a&1&&(_.H(0,"mat-form-field",34)(1,"mat-label"),_.M(2,37),_.I(),_.J(3,"input",38),_.R(4,C2i,2,0,"cm-error",15),_.I());a&2&&(_.z(4),_.E("cfcDebounceErrorFor","number"))};E2i=function(a){a&1&&(_.H(0,"cm-error",23),_.S(1,"Scale must be a number."),_.I())};
F2i=function(a){a&1&&(_.H(0,"mat-form-field",34)(1,"mat-label"),_.M(2,39),_.I(),_.J(3,"input",40),_.R(4,E2i,2,0,"cm-error",15),_.I());a&2&&(_.z(4),_.E("cfcDebounceErrorFor","number"))};G2i=function(a,b){a&1&&(_.H(0,"mat-option",27),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",a," "))};H2i=function(a){a&1&&(_.H(0,"mat-form-field",16)(1,"mat-label"),_.M(2,41),_.I(),_.H(3,"cfc-select",42),_.R(4,G2i,2,2,"mat-option",19),_.I()());a&2&&(a=_.O(3),_.z(4),_.E("ngForOf",a.roundingModes))};
I2i=function(a){a&1&&(_.H(0,"cm-error",23),_.M(1,45),_.I());a&2&&(a=_.O(4),_.z(1),_.og(a.DESCRIPTION_MAX_LENGTH),_.pg(1))};J2i=function(a){a&1&&(_.H(0,"mat-form-field",16)(1,"mat-label"),_.M(2,43),_.I(),_.H(3,"textarea",44),_.S(4," "),_.I(),_.R(5,I2i,2,1,"cm-error",15),_.I());a&2&&(_.z(3),_.E("rows",1),_.z(2),_.E("cfcDebounceErrorFor","maxlength"))};
L2i=function(a,b){a&1&&(_.H(0,"div",11)(1,"mat-form-field",12)(2,"mat-label"),_.M(3,13),_.I(),_.J(4,"input",14),_.R(5,n2i,2,1,"cm-error",15),_.R(6,o2i,2,0,"cm-error",15),_.R(7,r2i,2,1,"cm-error",15),_.R(8,s2i,2,0,"cm-error",15),_.I(),_.H(9,"mat-form-field",16)(10,"mat-label"),_.M(11,17),_.I(),_.H(12,"cfc-select",18),_.R(13,t2i,2,2,"mat-option",19),_.R(14,u2i,2,2,"mat-option",20),_.I(),_.R(15,v2i,2,0,"cm-error",15),_.I(),_.R(16,x2i,5,1,"mat-form-field",21),_.R(17,z2i,6,2,"mat-form-field",21),_.R(18,
B2i,5,1,"mat-form-field",22),_.R(19,D2i,5,1,"mat-form-field",22),_.R(20,F2i,5,1,"mat-form-field",22),_.R(21,H2i,5,1,"mat-form-field",21),_.R(22,J2i,6,2,"mat-form-field",21),_.I());if(a&2){a=b.$implicit;b=_.O(2);_.E("formGroup",a.formGroup);_.z(1);_.E("ngClass","cfc-dc-schema-form-name-input-"+a.level);_.z(4);_.E("cfcDebounceErrorFor","maxlength");_.z(1);_.E("cfcDebounceErrorFor","required");_.z(1);_.E("cfcDebounceErrorFor","pattern");_.z(1);_.E("cfcDebounceErrorFor","cfcTreeEditorNotUnique");_.z(5);
_.E("ngForOf",b.types);_.z(1);var c=(c=a.formGroup.controls.type.value)&&!b.types.includes(c);_.E("ngIf",c);_.z(1);_.E("cfcDebounceErrorFor","required");_.z(1);_.E("ngIf",b.enabledFieldKeys.includes("mode"));_.z(1);_.E("ngIf",b.enabledFieldKeys.includes("valueTemplate"));_.z(1);b.allowTypeParameters?(c=a.formGroup.controls.type.value,c="STRING"===c||"BYTES"===c):c=!1;_.E("ngIf",c);_.z(1);_.E("ngIf",K2i(b,a.formGroup));_.z(1);_.E("ngIf",K2i(b,a.formGroup));_.z(1);_.E("ngIf",K2i(b,a.formGroup));_.z(1);
_.E("ngIf",b.enabledFieldKeys.includes("description"))}};M2i=function(a){a&1&&(_.H(0,"div",8)(1,"cfc-tree-editor",9),_.R(2,L2i,23,16,"ng-template",10),_.I()());a&2&&(a=_.O(),_.z(1),_.E("nodesFormArray",a.fieldArray)("manager",a.treeManager))};N2i=function(a,b={}){return{schemaError:"string"===typeof a?a:a.format(b)}};
_.R2i=function({fb:a,fields:b,editAsText:c=!1,treeManager:d,converter:e,fieldNameMaxLength:f}){const g=a.group({editAsText:[c]}),l=O2i(e?e.toSchema(b):b),p=u=>P2i(u,e);d=d||new Q2i(f,[]);c?g.addControl("code",a.control(Y1i(b,e),[p])):(b=_.F1i(a,l,d),g.addControl("fields",b));return a.group({schemaEditor:g})};O2i=function(a){return a.map(b=>S2i(b,0))};
S2i=function(a,b){const c={value:{name:a.name,type:a.type,mode:a.mode,description:a.description,valueTemplate:a.valueTemplate,maxLength:a.maxLength,precision:a.precision,scale:a.scale,depth:b}};a=a.fields||[];0<a.length&&(c.children=a.map(d=>S2i(d,b+1)));return c};P2i=function(a,b){a=b2i(a.value||"",b);if(!Array.isArray(a))return N2i(a);for(b=0;b<a.length;++b)if(!a[b].name)return N2i(T2i,{index:b});b=new Set;for(const {name:c}of a){if(b.has(c))return N2i(U2i,{name:c});b.add(c)}return null};
_.W2i=function(a){{a=a.get("schemaEditor");const b=a.value;if(b.editAsText){if(a=b2i(b.code),!Array.isArray(a))throw Error("ft");}else a=V2i(a.get("fields"))}return a};V2i=function(a){return a.value.map(b=>X2i(b))};
X2i=function({value:a,children:b}){const c=a.mode,d=a.description,e=a.valueTemplate,f=a.maxLength,g=a.precision,l=a.scale,p=a.roundingMode;return Object.assign({},{name:a.name,type:a.type},c&&{mode:c},d&&{description:d},e&&{valueTemplate:e},b&&b.length&&{fields:b.map(X2i)},f&&{maxLength:f},g&&{precision:g},l&&{scale:l},p&&{roundingMode:p})};q2i={type:1,path:"/bigquery/docs/schemas#column_names"};_.e2i=["NULLABLE","REQUIRED","REPEATED"];Y2i=["NULLABLE","REPEATED"];
v6=class{static get currentSupportedTypes(){return Z2i}constructor(){Z2i=_.O8g.concat(["JSON"])}init(){}};Z2i=_.O8g;v6.\u0275fac=function(a){return new (a||v6)};v6.\u0275prov=_.h({token:v6,factory:v6.\u0275fac,providedIn:"root"});var d2i=["name","type","mode","description","fields"];var c2i=new _.zj("Invalid type {type}. Supported types are: {types}"),g2i=new _.zj("Unknown key(s): {unknownKeys}. Supported keys are: {allKeys}"),f2i=new _.zj("Invalid mode {mode}. Supported modes are: {modes}"),h2i=new _.zj("Invalid JSON. Original error message: {message}"),i2i=new _.zj("Invalid format {format}. Expected name:type");var U2i,T2i,p2i,Q2i,K2i,$2i;U2i=new _.zj("Duplicate field name {name}");T2i=new _.zj("Field name required at index {index}");p2i=new _.zj("For allowed characters, please refer to {url}");
Q2i=class{constructor(a=64,b){this.fieldNameMaxLength=a;this.enabledFieldKeys=b;this.uniqueNodeControlName="name";this.uniquenessConstraint=0}getNodeType(a){return"RECORD"===a.type?"OBJECT":"LEAF"}createChild(a){a={name:"",type:"STRING",depth:a?a.value.depth+1:0};this.enabledFieldKeys.includes("mode")&&(a.mode="NULLABLE");return a}createFormGroup(a,b){return a.group({name:[b.name,[_.Rj(this.fieldNameMaxLength),_.Qv,_.Sj(/^[\p{L}\p{N}\p{Pc}\p{Pd}\p{M}\s&%=>+:'<#|]+$/u)]],type:[b.type,[_.Qv]],mode:[b.mode],
description:[b.description,[_.Rj(2E3)]],valueTemplate:[b.valueTemplate,[_.Rj(2E3)]],maxLength:[b.maxLength],precision:[b.precision],scale:[b.scale],roundingMode:[b.roundingMode]})}};K2i=function(a,b){if(!a.allowTypeParameters)return!1;a=b.controls.type.value;return"NUMERIC"===a||"BIGNUMERIC"===a};
_.w6=class{get types(){return v6.currentSupportedTypes}get modes(){return this.nonRequiredModeOnly?Y2i:_.e2i}get formGroup(){return this.parentFormGroupName.control.controls.schemaEditor}get editAsTextControl(){return this.formGroup.controls.editAsText}get fieldArray(){return this.formGroup.controls.fields}get code(){return this.formGroup.controls.code}constructor(a,b,c){this.parentFormGroupName=a;this.fb=b;this.fields=[];this.allowTypeParameters=this.nonRequiredModeOnly=!1;this.fieldNameMaxLength=
64;this.enableEditAsText=!0;this.enabledFieldKeys=["mode","description","roundingMode"];this.roundingModes=Object.keys(_.kyg);this.testEditorOptions={minimap:{enabled:!1}};this.CODE_EDITOR_HEIGHT="600px";this.VALUE_TEMPLATE_MAX_LENGTH=this.DESCRIPTION_MAX_LENGTH=2E3;this.schemaError=d=>P2i(d,this.converter);this.destroy$=new _.Ef;this.validFields=[];c.init()}ngOnInit(){this.treeManager=new Q2i(this.fieldNameMaxLength,this.enabledFieldKeys);this.editAsTextControl.valueChanges.pipe(_.Mf(this.destroy$)).subscribe(a=>
{if(a){var b=V2i(this.fieldArray);this.validFields=b;this.formGroup.removeControl("fields");this.formGroup.addControl("code",this.fb.control(Y1i(b,this.converter),[this.schemaError]))}else a=null==(b=this.code)?void 0:b.value,b=b2i(a||"",this.converter),Array.isArray(b)||(b=this.validFields||[]),this.formGroup.removeControl("code"),b=O2i(b),b=_.F1i(this.fb,b,this.treeManager),this.formGroup.addControl("fields",b);this.formGroup.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};
_.w6.\u0275fac=function(a){return new (a||_.w6)(_.A(_.gw,8),_.A(_.qw),_.A(v6))};
_.w6.\u0275cmp=_.n({type:_.w6,selectors:[["dc-schema-form-editor"]],inputs:{fields:"fields",converter:"converter",nonRequiredModeOnly:"nonRequiredModeOnly",allowTypeParameters:"allowTypeParameters",fieldNameMaxLength:"fieldNameMaxLength",enableEditAsText:"enableEditAsText",enabledFieldKeys:"enabledFieldKeys"},features:[_.Bg([],[_.cY])],decls:4,vars:3,consts:function(){return[["formArrayName","schemaEditor"],["formControlName","editAsText",4,"ngIf"],[4,"ngIf"],["role","group",4,"ngIf"],["formControlName",
"editAsText"]," Edit as text ",["language","json","formControlName","code","name","codeditor","aria-label","Edit schema as text",3,"height","options"],["errorFor","schemaError",3,"control"],["role","group"],["addNodeLabel","Add field","deleteNodeTooltipText","Delete field",1,"cfc-space-above-base",3,"nodesFormArray","manager"],["cfcTreeEditorTemplate",""],[1,"cfc-inline-form-row","cfc-dc-schema-inline-form-row",3,"formGroup"],[1,"cfc-inline-form-control",3,"ngClass"]," Field name ","formControlName name required  matInput ".split(" "),
["matError","",4,"cfcDebounceErrorFor"],[1,"cfc-inline-form-control"]," Type ","formControlName;type;required;;optionsAriaLabel;Type options".split(";"),[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["class","cfc-inline-form-control",4,"ngIf"],["class","cfc-inline-form-control cfc-dc-schema-form-type-parameters",4,"ngIf"],["matError",""]," Field name should not exceed \ufffd0\ufffd characters. "," Field name is required "," Duplicate field name ",[3,"value"]," Field type is required "," Mode ",
["formControlName","mode","optionsAriaLabel","Mode options"]," Value template ",["matInput","","formControlName","valueTemplate",3,"rows"]," Value template should not exceed \ufffd0\ufffd characters. ",[1,"cfc-inline-form-control","cfc-dc-schema-form-type-parameters"]," Max length ","matInput  formControlName maxLength cfcNumberInput ".split(" ")," Precision ","matInput  formControlName precision cfcNumberInput ".split(" ")," Scale ","matInput  formControlName scale cfcNumberInput ".split(" ")," Rounding Mode ",
["formControlName","roundingMode"]," Description ",["matInput","","formControlName","description",3,"rows"]," Description should not exceed \ufffd0\ufffd characters. "]},template:function(a,b){a&1&&(_.H(0,"div",0),_.R(1,k2i,2,0,"mat-slide-toggle",1),_.R(2,m2i,4,4,"ng-container",2),_.R(3,M2i,3,2,"div",3),_.I());a&2&&(_.z(1),_.E("ngIf",b.enableEditAsText),_.z(1),_.E("ngIf",b.editAsTextControl.value&&b.code),_.z(1),_.E("ngIf",!b.editAsTextControl.value&&b.fieldArray))},dependencies:[_.Dv,_.SK,_.ip,_.jp,
_.kp,_.fK,_.fL,_.dy,_.eK,_.fy,_.Au,_.wu,_.dK,_.my,_.ny,_.ky,_.qk,_.Xj,_.Uv,_.Vv,_.lw,_.fw,_.iw,_.hw,_.hz,_.lz,_.IA,_.MA,_.HA,_.U1i,_.Q1i],styles:[".cfc-dc-schema-inline-form-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-bottom:0}.cfc-dc-schema-inline-form-row[_ngcontent-%COMP%]   .mat-form-field-type-cfc-select[_ngcontent-%COMP%]{width:100%;max-width:120px}.cfc-dc-schema-form-type-parameters[_ngcontent-%COMP%]{max-width:80px}@media (max-width:335px){.cfc-dc-schema-form-name-input-0[_ngcontent-%COMP%]{width:192px}.cfc-dc-schema-form-name-input-1[_ngcontent-%COMP%]{width:176px}.cfc-dc-schema-form-name-input-2[_ngcontent-%COMP%]{width:160px}.cfc-dc-schema-form-name-input-3[_ngcontent-%COMP%]{width:144px}.cfc-dc-schema-form-name-input-4[_ngcontent-%COMP%]{width:128px}.cfc-dc-schema-form-name-input-5[_ngcontent-%COMP%]{width:112px}.cfc-dc-schema-form-name-input-6[_ngcontent-%COMP%]{width:96px}}@media (min-width:335px){.cfc-dc-schema-form-name-input-0[_ngcontent-%COMP%]{width:256px}.cfc-dc-schema-form-name-input-1[_ngcontent-%COMP%]{width:240px}.cfc-dc-schema-form-name-input-2[_ngcontent-%COMP%]{width:224px}.cfc-dc-schema-form-name-input-3[_ngcontent-%COMP%]{width:208px}.cfc-dc-schema-form-name-input-4[_ngcontent-%COMP%]{width:192px}.cfc-dc-schema-form-name-input-5[_ngcontent-%COMP%]{width:176px}.cfc-dc-schema-form-name-input-6[_ngcontent-%COMP%]{width:160px}}\n/*# sourceMappingURL=schema_form_editor.css.map */"]});
$2i=[_.Lv,_.TK,_.wp,_.mK,_.gL,_.BN,_.gy,_.oy,_.Zy,_.FG,_.sw,_.qz,_.NA,_.V1i];_.x6=class{};_.x6.\u0275fac=function(a){return new (a||_.x6)};_.x6.\u0275mod=_.r({type:_.x6,id:"pm_data_catalog_schema_form_editor"});_.x6.\u0275inj=_.k({imports:[$2i]});_.Vf(_.x6,"pm_data_catalog_schema_form_editor");
}catch(e){_._DumpException(e)}
try{
_.sh("pm_bigquery_create_table_subtask");
var oyl=function(a,b){const c={type:a,partition:void 0};2===a?c.partition=Object.assign({range:{}},b):1===a&&(void 0!==b.requirePartitionFilter&&(c.requirePartitionFilter=b.requirePartitionFilter),c.partition=Object.assign({type:"DAY"},b));return c},pyl=function(a){if(1===a.type&&a.partition){var b=a.partition;a.requirePartitionFilter&&(b.requirePartitionFilter=a.requirePartitionFilter);return b}},qyl=function(a){a&1&&(_.H(0,"cm-error",7),_.M(1,8),_.I())},ryl=function(a){const b=a.value;return!a.disabled&&
b.clustering?{fields:b.clustering.split(",").map(c=>c.trim()).filter(c=>0<c.length)}:void 0},syl=function(a){a&1&&(_.H(0,"div",18),_.J(1,"dc-schema-form-editor"),_.I())},tyl=function(a,b){return(a.type||"").toLowerCase()==b.toLowerCase()},uyl=function(a,b){a&1&&(_.H(0,"mat-option",14),_.S(1),_.V(2,"partitionDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},vyl=function(a,b){a&1&&(_.H(0,"mat-option",14),_.S(1),_.V(2,"partitionDisplayName"),_.I());a&2&&(a=b.$implicit,
_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},wyl=function(a){a&1&&(_.H(0,"mat-optgroup",15),_.R(1,vyl,3,4,"mat-option",4),_.I());a&2&&(a=_.O(),_.z(1),_.E("ngForOf",a.columnPartitioningOptions))},xyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,17),_.I())},yyl=function(a){a&1&&_.M(0,19,1)},zyl=function(a){a&1&&(_.H(0,"div")(1,"cfc-form-label",18),_.lg(2,19),_.H(3,"cfc-form-label-tooltip"),_.R(4,yyl,1,0,"ng-template",20),_.I(),_.mg(),_.I(),_.H(5,"fieldset",21)(6,"mat-checkbox",22),_.M(7,23),_.I()()());
if(a&2){_.O();const b=_.yg(17);_.z(4);_.E("ngTemplateOutlet",b)}},Ayl=function(a){a&1&&_.M(0,25,1)},Byl=function(a){a&1&&(_.K(0),_.H(1,"mat-radio-button",29),_.M(2,30),_.I(),_.H(3,"mat-radio-button",31),_.M(4,32),_.I(),_.H(5,"mat-radio-button",33),_.M(6,34),_.I(),_.L())},Cyl=function(a){a&1&&(_.H(0,"div")(1,"cfc-form-label",24),_.lg(2,25),_.H(3,"cfc-form-label-tooltip"),_.R(4,Ayl,1,0,"ng-template",20),_.I(),_.mg(),_.I(),_.H(5,"mat-radio-group",26)(6,"mat-radio-button",27),_.M(7,28),_.I(),_.R(8,Byl,
7,0,"ng-container",10),_.I()());if(a&2){a=_.O();const b=_.yg(19);_.z(4);_.E("ngTemplateOutlet",b);_.z(4);_.E("ngIf",a.isHourlyPartitioningSupported)}},Dyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,46),_.I())},Eyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,47),_.I())},Fyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,48),_.I())},Gyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,49),_.I())},Hyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,50),_.I())},Iyl=function(a){a&1&&(_.H(0,"cm-error",16),_.M(1,
51),_.I())},Kyl=function(a){a&1&&(_.H(0,"div",35)(1,"mat-form-field")(2,"mat-label"),_.M(3,36),_.I(),_.H(4,"mat-hint",37),_.M(5,38),_.I(),_.J(6,"input",39),_.R(7,Dyl,2,0,"cm-error",9),_.R(8,Eyl,2,0,"cm-error",9),_.I(),_.H(9,"mat-form-field")(10,"mat-label"),_.M(11,40),_.I(),_.H(12,"mat-hint",37),_.M(13,41),_.I(),_.J(14,"input",42),_.R(15,Fyl,2,0,"cm-error",9),_.R(16,Gyl,2,0,"cm-error",9),_.I(),_.H(17,"mat-form-field")(18,"mat-label"),_.M(19,43),_.I(),_.H(20,"mat-hint",37),_.M(21,44),_.I(),_.J(22,
"input",45),_.R(23,Hyl,2,0,"cm-error",9),_.R(24,Iyl,2,0,"cm-error",9),_.I()());a&2&&(_.z(7),_.E("cfcDebounceErrorFor","required"),_.z(1),_.E("cfcDebounceErrorFor","invalid-format"),_.z(7),_.E("cfcDebounceErrorFor","required"),_.z(1),_.E("cfcDebounceErrorFor","invalid-format"),_.z(7),_.E("cfcDebounceErrorFor","required"),_.z(1),_.E("cfcDebounceErrorFor",_.Eg(6,Jyl)))},Lyl=function(a){a&1&&(_.H(0,"p"),_.M(1,52),_.I(),_.H(2,"a",53),_.S(3," Learn more "),_.I());a&2&&(a=_.O(),_.z(2),_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_QUERYING_PARTITIONED_TABLES))},
Myl=function(a){a&1&&(_.H(0,"p"),_.M(1,54),_.I())},Oyl=function(a){return a.group({start:["",[_.Qv,Nyl]],end:["",[_.Qv,Nyl]],interval:["",[_.Qv,Nyl,_.Oj(1)]]})},Nyl=function(a){return isNaN(Number(a.value))?{"invalid-format":!0}:null},Pyl=function(a,b){return"EMPTY_TABLE"!==a&&("AVRO"===b||"DATASTORE_BACKUP"===b||"PARQUET"===b||"ORC"===b||"ICEBERG"===b)},Qyl=function(a,b,c){const d=!Pyl(a,b);return _.Vvg?d||"EMPTY_TABLE"!==a&&"EXTERNAL"===c&&("AVRO"===b||"PARQUET"===b||"ORC"===b):d&&"ICEBERG"!==b},
Ryl=function(a,b){return"CSV"===b&&("GCS"===a||"UPLOAD"===a||"DRIVE"===a)},Syl=function(a,b){return("GCS"===a||"UPLOAD"===a||"DRIVE"===a)&&"NEWLINE_DELIMITED_JSON"===b},Tyl=function(a,b){return"DRIVE"===b&&"GOOGLE_SHEETS"===a},Uyl=function(a,b){return!("AVRO"===a||"PARQUET"===a||"ORC"===a||"DATASTORE_BACKUP"===a)&&("GCS"===b||"UPLOAD"===b)},Vyl=function(a){return"EMPTY_TABLE"===a},Wyl=function(a,b){a.fieldDelimiter=b.delimiter;a.quote=b.quote;a.allowJaggedRows=b.shouldAllowJaggedRows;a.allowQuotedNewlines=
b.shouldAllowQuotedNewlines},Xyl=function(a,b){var c=b.selectedPartitioning;c=2===c.type&&c.partition?c.partition:void 0;const d=pyl(b.selectedPartitioning);c?a.rangePartitioning=c:d&&(a.timePartitioning=d);b.selectedClustering&&(a.clustering=b.selectedClustering)},Yyl=function(a,b){if(b.selectedHivePartitioning){b.hivePartitioningOptions.sourceUriPrefix||(b.hivePartitioningOptions.sourceUriPrefix="");var c=b.hivePartitioningOptions.sourceUriPrefix;if("CUSTOM"===b.hivePartitioningOptions.mode){var d=
b.hivePartitioningOptions.sourceUriPrefix;c=b.hivePartitioningSchema;d="/"===d.charAt(d.length-1)?d.substring(0,d.length-1):d;if(c.fields)for(const e of c.fields)d+=`/{${e.name}:${e.type}}`;c=d}a.hivePartitioningOptions={mode:b.hivePartitioningOptions.mode,sourceUriPrefix:c};b.hivePartitioningOptions.requirePartitionFilter&&(a.hivePartitioningOptions.requirePartitionFilter=b.hivePartitioningOptions.requirePartitionFilter)}},Zyl=function(a,b){a.ignoreUnknownValues=b.shouldIgnoreUnknownValues;Uyl(b.selectedFileFormat,
b.selectedSource)&&(a.maxBadRecords=b.maxBadRecords||0);a.sourceFormat=b.selectedFileFormat;switch(b.selectedSource){case "DRIVE":a.sourceUris=[b.driveUri];break;case "GCS":a.sourceUris=[_.Tyh(b.gcsLocation)];break;case "S3":a.sourceUris=[b.s3Path];break;case "ABS":a.sourceUris=[b.absPath]}},azl=function(a){if("EMPTY_TABLE"===a.selectedSource){var b=$yl(a);b.schema=a.schema;Xyl(b,a);void 0!==a.selectedPartitioning.requirePartitionFilter&&(b.requirePartitionFilter=a.selectedPartitioning.requirePartitionFilter,
b.timePartitioning&&(b.timePartitioning.requirePartitionFilter=a.selectedPartitioning.requirePartitionFilter));return b}switch(a.selectedTableType){case "EXTERNAL":b=$yl(a);b.externalDataConfiguration={autodetect:a.shouldAutoDetectSchema};Zyl(b.externalDataConfiguration,a);Yyl(b.externalDataConfiguration,a);if(Ryl(a.selectedSource,a.selectedFileFormat)){b.externalDataConfiguration.csvOptions={};var c=b.externalDataConfiguration.csvOptions;Wyl(c,a);c.skipLeadingRows=String(a.skipLeadingRows||0);a.shouldAutoDetectSchema&&
(c.allowJaggedRows||delete c.allowJaggedRows,c.allowQuotedNewlines||delete c.allowQuotedNewlines,Number(a.skipLeadingRows)||delete c.skipLeadingRows)}Tyl(a.selectedFileFormat,a.selectedSource)&&(b.externalDataConfiguration.googleSheetsOptions={},b.externalDataConfiguration.googleSheetsOptions.range=a.sheetRange,null!=a.skipLeadingRows&&(b.externalDataConfiguration.googleSheetsOptions.skipLeadingRows=String(a.skipLeadingRows)));switch(a.selectedSource){case "S3":var d,e=_.u1(null==(d=a.awsConnection)?
void 0:d.name);b.externalDataConfiguration.connectionId=[e.projectId,e.locationId,e.connectionId].join(".");break;case "ABS":d=_.u1(null==(e=a.azureConnection)?void 0:e.name);b.externalDataConfiguration.connectionId=[d.projectId,d.locationId,d.connectionId].join(".");break;case "GCS":if(a.selectedCloudResourceConnection){let f;d=_.u1(null==(f=a.cloudResourceConnection)?void 0:f.name);b.externalDataConfiguration.connectionId=[d.projectId,d.locationId,d.connectionId].join(".")}}Qyl(a.selectedSource,
a.selectedFileFormat,a.selectedTableType)&&!a.shouldAutoDetectSchema&&(_.Wvg&&a.selectedHivePartitioning?b.externalDataConfiguration.schema=a.schema:b.schema=a.schema);return b;default:return $yl(a)}},$yl=function(a){return{tableReference:a.tableLocation,encryptionConfiguration:a.encryptionConfiguration,defaultCollation:"NATIVE"===a.selectedTableType?a.defaultCollation:void 0,defaultRoundingMode:"NATIVE"===a.selectedTableType?a.defaultRoundingMode:void 0}},bzl=function(a,b){a&1&&(_.H(0,"mat-option",
7),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a.format),_.z(1),_.U(" ",a.displayName," "))},czl=function(a){a&1&&(_.H(0,"cm-error",12),_.M(1,13),_.I())},ezl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",8),_.H(2,"mat-label"),_.M(3,9),_.I(),_.H(4,"mat-hint"),_.M(5,10),_.I(),_.R(6,czl,2,0,"cm-error",11),_.I());a&2&&(_.z(6),_.E("cfcDebounceErrorFor",_.Eg(1,dzl)))},fzl=function(a,b){a&1&&(_.H(0,"mat-option",7),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a.format),_.z(1),_.U(" ",a.displayName,
" "))},gzl=function(a){a&1&&(_.H(0,"cm-error",12),_.M(1,13),_.I())},izl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",8),_.H(2,"mat-label"),_.M(3,9),_.I(),_.H(4,"mat-hint"),_.M(5,10),_.I(),_.R(6,gzl,2,0,"cm-error",11),_.I());a&2&&(_.z(6),_.E("cfcDebounceErrorFor",_.Eg(1,hzl)))},jzl=function(a,b){a&1&&(_.H(0,"mat-option",13),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a.key),_.z(1),_.U(" ",a.value," "))},kzl=function(a){a&1&&(_.H(0,"mat-form-field")(1,"cfc-select",9),_.R(2,jzl,2,2,"mat-option",
10),_.V(3,"keyvalue"),_.I(),_.H(4,"mat-label",11),_.M(5,12),_.I()());a&2&&(a=_.O(),_.z(2),_.E("ngForOf",_.W(3,1,a.writeDispositionOptions)))},lzl=function(a){a&1&&(_.H(0,"cm-error",19),_.M(1,20),_.I())},mzl=function(a){a&1&&(_.H(0,"cm-error",19),_.M(1,21),_.I())},nzl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",14),_.H(2,"mat-label"),_.M(3,15),_.I(),_.H(4,"cfc-help-button",16),_.M(5,17),_.I(),_.R(6,lzl,2,0,"cm-error",18),_.R(7,mzl,2,0,"cm-error",18),_.I());a&2&&(_.z(6),_.E("cfcDebounceErrorFor",
"min"),_.z(1),_.E("cfcDebounceErrorFor","number"))},ozl=function(a){a&1&&(_.H(0,"div",22)(1,"mat-checkbox",23),_.M(2,24),_.I(),_.H(3,"cfc-help-button",25),_.lg(4,26),_.J(5,"a",27),_.mg(),_.I()())},pzl=function(a){a&1&&_.J(0,"bq-delimiter-selector",28)},qzl=function(a){a&1&&_.J(0,"bq-quote-selector",29)},rzl=function(a){a&1&&(_.H(0,"cm-error",19),_.M(1,41),_.I())},szl=function(a){a&1&&(_.H(0,"cm-error",19),_.M(1,42),_.I())},tzl=function(a){a&1&&(_.H(0,"div",22)(1,"mat-checkbox",43),_.M(2,44),_.I(),
_.H(3,"cfc-help-button",25),_.M(4,45),_.I()())},uzl=function(a){a&1&&(_.H(0,"div")(1,"mat-form-field"),_.J(2,"input",30),_.H(3,"mat-label"),_.M(4,31),_.I(),_.H(5,"cfc-help-button",16),_.M(6,32),_.I(),_.R(7,rzl,2,0,"cm-error",18),_.R(8,szl,2,0,"cm-error",18),_.I(),_.H(9,"div",22)(10,"mat-checkbox",33),_.M(11,34),_.I(),_.H(12,"cfc-help-button",25),_.M(13,35),_.I()(),_.H(14,"div",22)(15,"mat-checkbox",36),_.M(16,37),_.I(),_.H(17,"cfc-help-button",38),_.lg(18,39),_.J(19,"a",40),_.mg(),_.I()(),_.R(20,
tzl,5,0,"div",3),_.I());a&2&&(a=_.O(),_.z(7),_.E("cfcDebounceErrorFor","min"),_.z(1),_.E("cfcDebounceErrorFor","number"),_.z(12),_.E("ngIf",a.isNewlineDelimitedJson))},vzl=function(a){a&1&&(_.H(0,"div",46),_.J(1,"bq-kms-picker",47),_.V(2,"async"),_.V(3,"async"),_.I());a&2&&(a=_.O(),_.z(1),_.E("projectId",_.W(2,2,a.currentProjectIdObs$))("locationId",_.W(3,4,a.kmsLocation$)))},wzl=function(a){a&1&&_.J(0,"bq-collation-picker",48);a&2&&_.E("isTable",!0)},zzl=function({fb:a,model:b}){const c=_.V1g(a);
var d;if(null==b?0:null==(d=b.encryptionConfiguration)?0:d.kmsKeyName){var e;c.get("bqKmsKey.key").setValue(null==b?void 0:null==(e=b.encryptionConfiguration)?void 0:e.kmsKeyName)}d=a.group;e=[null==b?void 0:b.selectedWriteDisposition];var f=[null==b?void 0:b.maxBadRecords],g=[null==b?void 0:b.shouldIgnoreUnknownValues],l=[null==b?void 0:b.skipLeadingRows],p=null==b?void 0:b.delimiter;if(p)if(xzl.has(p))var u=p;else{u="custom";var v=p||""}u=a.group({delimiter:[u],customDelimiter:[{value:v,disabled:"custom"!==
u},[_.Qv,_.Rj(1)]]});v=null==b?void 0:b.quote;let w;if(v)if(yzl.has(v))var y=v;else y="custom",w=v||"";y=a.group({quote:[y],customQuote:[{value:w,disabled:"custom"!==y},[_.Qv,_.Rj(1)]]});return d.call(a,{selectedWriteDisposition:e,maxBadRecords:f,shouldIgnoreUnknownValues:g,skipLeadingRows:l,delimiter:u,quote:y,shouldAllowQuotedNewlines:[null==b?void 0:b.shouldAllowQuotedNewlines],shouldAllowJaggedRows:[null==b?void 0:b.shouldAllowJaggedRows],defaultCollation:_.U0i(a,null==b?void 0:b.defaultCollation),
defaultRoundingMode:_.$0i(a,null==b?void 0:b.defaultRoundingMode),kmsPicker:c})},Azl=function(a,b){a&1&&(_.H(0,"cfc-message",11)(1,"cfc-message-text"),_.S(2),_.I()());a&2&&(a=b.ngIf,_.O(),_.z(2),_.U(" ",_.Ij("The selected source requires a dataset in the {LOCATION} location. Please choose a valid dataset.",{LOCATION:0===a.length?"":(new _.WTb({type:"disjunction"})).format(a)})," "))},Bzl=function(a,b){a&1&&(_.H(0,"mat-option",12),_.S(1),_.V(2,"tableTypeDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",
a),_.z(1),_.U(" ",_.W(2,2,a)," "))},Czl=function(a,b){a&1&&(_.H(0,"mat-option",12),_.S(1),_.V(2,"s3ConnectionDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},Fzl=function(a){if(a&1){const b=_.Hd();_.K(0);_.H(1,"mat-form-field")(2,"cfc-select",13)(3,"mat-option",14);_.N("click",function(){_.t(b);const c=_.O();return _.x(Dzl(c,"AWS"))});_.J(4,"cfc-select-rich-option",15);_.I();_.R(5,Czl,3,4,"mat-option",4);_.V(6,"async");_.I();_.H(7,"mat-label",16);_.M(8,17);
_.I()();_.L()}a&2&&(a=_.O(),_.z(2),_.E("cfcIamCheck",_.Eg(5,Ezl)),_.z(1),_.E("value",void 0),_.z(2),_.E("ngForOf",_.W(6,3,a.connections$)))},Gzl=function(a,b){a&1&&(_.H(0,"mat-option",12),_.S(1),_.V(2,"absConnectionDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},Hzl=function(a){if(a&1){const b=_.Hd();_.K(0);_.H(1,"mat-form-field")(2,"cfc-select",18)(3,"mat-option",14);_.N("click",function(){_.t(b);const c=_.O();return _.x(Dzl(c,"AZURE"))});_.J(4,"cfc-select-rich-option",
19);_.I();_.R(5,Gzl,3,4,"mat-option",4);_.V(6,"async");_.I();_.H(7,"mat-label",20);_.M(8,21);_.I()();_.L()}a&2&&(a=_.O(),_.z(2),_.E("cfcIamCheck",_.Eg(5,Ezl)),_.z(1),_.E("value",void 0),_.z(2),_.E("ngForOf",_.W(6,3,a.connections$)))},Izl=function(a,b){a&1&&(_.H(0,"mat-option",12),_.S(1),_.V(2,"cloudResourceConnectionDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},Jzl=function(a){if(a&1){const b=_.Hd();_.H(0,"mat-form-field")(1,"cfc-select",26)(2,"mat-option",
14);_.N("click",function(){_.t(b);const c=_.O(2);return _.x(Dzl(c,"CLOUD_RESOURCE"))});_.J(3,"cfc-select-rich-option",27);_.I();_.R(4,Izl,3,4,"mat-option",4);_.V(5,"async");_.I();_.H(6,"mat-label",28);_.M(7,29);_.I()()}a&2&&(a=_.O(2),_.z(1),_.E("cfcIamCheck",_.Eg(5,Ezl)),_.z(1),_.E("value",void 0),_.z(2),_.E("ngForOf",_.W(5,3,a.connections$)))},Kzl=function(a){a&1&&(_.K(0),_.H(1,"cfc-message")(2,"cfc-message-text",22),_.M(3,23),_.I()(),_.H(4,"mat-checkbox",24),_.M(5,25),_.I(),_.R(6,Jzl,8,6,"mat-form-field",
10),_.L());a&2&&(a=_.O(),_.z(6),_.E("ngIf",a.selectedCloudResourceConnection.value))},Lzl=function(a){a&1&&(_.H(0,"p"),_.M(1,30),_.I())},Mzl=function({fb:a,model:b}){var c=null==b?void 0:b.tableLocation;return a.group({awsConnection:[null==b?void 0:b.awsConnection],azureConnection:[null==b?void 0:b.azureConnection],cloudResourceConnection:[null==b?void 0:b.cloudResourceConnection],selectedTableType:[null==b?void 0:b.selectedTableType],selectedCloudResourceConnection:[null==b?void 0:b.selectedCloudResourceConnection],
location:_.cMk(a,_.bMk(c?{projectId:c.projectId||"",datasetId:c.datasetId||"",tableId:c.tableId||""}:void 0))})},Nzl=function({fb:a,model:b}){var c=a.group,d=null==b?void 0:b.selectedPartitioning,e=null==d?void 0:d.partition;e=a.group({partitioning:[d,[_.Qv]],requirePartitionFilter:[!(null==d||!d.requirePartitionFilter)],type:[e&&"type"in e?e.type:void 0]});2===(null==d?void 0:d.type)&&e.addControl("rangePartition",Oyl(a));b=null==b?void 0:b.selectedClustering;b=a.group({clustering:[b&&b.fields?b.fields.join(", "):
void 0,[_.Sj(/^[\w\s,]*$/)]]});return c.call(a,{partitioning:e,clustering:b})},Ozl=function(a){a&1&&(_.H(0,"div")(1,"cfc-message")(2,"cfc-message-text",2),_.M(3,3),_.I()()())},Pzl=function(a){a&1&&(_.H(0,"cfc-message")(1,"cfc-message-text",2),_.M(2,8),_.I()())},Qzl=function(a){a&1&&(_.H(0,"div")(1,"div",5)(2,"mat-checkbox",6),_.M(3,7),_.I()(),_.R(4,Pzl,3,0,"cfc-message",1),_.I());a&2&&(a=_.O(2),_.z(4),_.E("ngIf",a.shouldAutoDetectSchema.value))},Rzl=function(a){a&1&&(_.H(0,"div",9),_.J(1,"dc-schema-form-editor",
10),_.I());a&2&&(a=_.O(2),_.z(1),_.E("allowTypeParameters",a.allowTypeParameters)("fieldNameMaxLength",300))},Szl=function(a){a&1&&(_.H(0,"div"),_.R(1,Qzl,5,1,"div",1),_.R(2,Rzl,2,2,"div",4),_.I());a&2&&(a=_.O(),_.z(1),_.E("ngIf",!a.isEmptyTable),_.z(1),_.E("ngIf",a.isEmptyTable||!a.shouldAutoDetectSchema.value))},Tzl=function({fb:a,model:b}){let c;return a.group({shouldAutoDetectSchema:[null==b?void 0:b.shouldAutoDetectSchema],schema:_.R2i({fb:a,fields:(null==b?void 0:null==(c=b.schema)?void 0:c.fields)||
[],fieldNameMaxLength:300})})},Uzl=function(a){const b=a.value;let c=[];try{c=_.W2i(a.get("schema"))}catch(d){c=[]}return{shouldAutoDetectSchema:b.shouldAutoDetectSchema,schema:{fields:c}}},Vzl=function(a,b){a&1&&(_.H(0,"mat-option",14),_.S(1),_.V(2,"sourceDisplayName"),_.I());a&2&&(a=b.$implicit,_.E("value",a),_.z(1),_.U(" ",_.W(2,2,a)," "))},Wzl=function(a){a&1&&(_.H(0,"cm-error",24),_.M(1,25),_.I())},Xzl=function(a){a&1&&(_.H(0,"cm-error",24),_.S(1),_.I());a&2&&(a=_.O(2),_.z(1),_.U(" ",a.gcsLocation.getError("uri"),
" "))},Yzl=function(a){a&1&&(_.H(0,"mat-form-field",15),_.J(1,"storage-location-picker-icon",16)(2,"input",17)(3,"storage-browser-subtask",18),_.H(4,"mat-label"),_.lg(5,19),_.J(6,"a",20),_.mg(),_.I(),_.H(7,"cfc-help-button",21),_.lg(8,22),_.J(9,"p"),_.H(10,"p"),_.J(11,"i"),_.I(),_.mg(),_.I(),_.R(12,Wzl,2,0,"cm-error",23),_.R(13,Xzl,2,1,"cm-error",23),_.I());a&2&&(a=_.O(),_.E("bucketFilterPredicate",a.gcsBucketFilterPredicate),_.z(3),_.E("titleOverride",a.MSG_GCS_PICKER_TITLE_FORM),_.z(3),_.E("cfcDocLink",
a.dl.CONSOLE__BIGQUERY_EXTERNAL_DATA_CLOUD_STORAGE_WILDCARD_SUPPORT),_.z(6),_.E("cfcDebounceErrorFor","validStorageUri"),_.z(1),_.E("cfcDebounceErrorFor","uri"))},Zzl=function(a){a&1&&(_.H(0,"cm-error",24),_.lg(1,34),_.J(2,"a",35)(3,"a",36),_.mg(),_.I());a&2&&(a=_.O(2),_.z(3),_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL))},$zl=function(a){a&1&&(_.H(0,"cm-error",24),_.M(1,37),_.I())},aAl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"cfc-file-picker",26,27)(3,"cfc-file-picker-buttons",
28),_.H(4,"mat-label"),_.M(5,29),_.I(),_.H(6,"cfc-help-button",30),_.lg(7,31),_.J(8,"a",32)(9,"a",33),_.mg(),_.I(),_.R(10,Zzl,4,1,"cm-error",23),_.R(11,$zl,2,0,"cm-error",23),_.I());if(a&2){const b=_.yg(2);a=_.O();_.z(3);_.E("filePicker",b);_.z(6);_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL);_.z(1);_.E("cfcDebounceErrorFor","maxFileSize");_.z(1);_.E("cfcDebounceErrorFor","required")}},bAl=function(a){a&1&&(_.H(0,"cm-error",24),_.lg(1,43),_.J(2,"b")(3,"b"),_.mg(),_.I())},cAl=function(a){a&
1&&(_.H(0,"cm-error",24),_.M(1,44),_.I())},dAl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",38),_.H(2,"mat-label"),_.M(3,39),_.I(),_.H(4,"cfc-help-button",40),_.lg(5,41),_.J(6,"p")(7,"p")(8,"p")(9,"p"),_.H(10,"ul")(11,"li"),_.J(12,"a",42),_.I(),_.H(13,"li"),_.J(14,"b"),_.I()(),_.mg(),_.I(),_.R(15,bAl,4,0,"cm-error",23),_.R(16,cAl,2,0,"cm-error",23),_.I());a&2&&(_.z(15),_.E("cfcDebounceErrorFor","pattern"),_.z(1),_.E("cfcDebounceErrorFor","required"))},eAl=function(a){a&1&&(_.H(0,"cm-error",
24),_.M(1,49),_.I())},fAl=function(a){a&1&&(_.H(0,"cm-error",24),_.M(1,50),_.I())},gAl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",45),_.H(2,"mat-label"),_.M(3,46),_.I(),_.H(4,"cfc-help-button",47),_.lg(5,48),_.J(6,"p"),_.mg(),_.I(),_.R(7,eAl,2,0,"cm-error",23),_.R(8,fAl,2,0,"cm-error",23),_.I());a&2&&(_.z(7),_.E("cfcDebounceErrorFor","pattern"),_.z(1),_.E("cfcDebounceErrorFor","required"))},hAl=function(a){a&1&&(_.H(0,"cm-error",24),_.M(1,55),_.I())},iAl=function(a){a&1&&(_.H(0,"cm-error",
24),_.M(1,56),_.I())},jAl=function(a){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",51),_.H(2,"mat-label"),_.M(3,52),_.I(),_.H(4,"cfc-help-button",53),_.lg(5,54),_.J(6,"p"),_.mg(),_.I(),_.R(7,hAl,2,0,"cm-error",23),_.R(8,iAl,2,0,"cm-error",23),_.I());a&2&&(_.z(7),_.E("cfcDebounceErrorFor","pattern"),_.z(1),_.E("cfcDebounceErrorFor","required"))},kAl=function(a,b){a&1&&(_.H(0,"mat-option",14),_.S(1),_.I());a&2&&(a=b.$implicit,_.E("value",a.format),_.z(1),_.U(" ",a.displayName," "))},lAl=function(a){a&
1&&(_.H(0,"mat-form-field",57)(1,"cfc-select",58),_.R(2,kAl,2,2,"mat-option",4),_.V(3,"async"),_.I(),_.H(4,"mat-label",59),_.M(5,60),_.I()());a&2&&(a=_.O(),_.z(2),_.E("ngForOf",_.W(3,1,a.fileFormatOptions$)))},mAl=function(a){a&1&&(_.lg(0,62,1),_.K(1),_.J(2,"a",65),_.L(),_.mg());a&2&&(a=_.O(2),_.z(2),_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_CREATE_BIGTABLE_EXTERNAL_TABLE))},nAl=function(a){a&1&&(_.lg(0,62,2),_.J(1,"a",66),_.mg());a&2&&(a=_.O(2),_.z(1),_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_EXTERNAL_DATA_BIGTABLE))},
oAl=function(a){a&1&&(_.H(0,"cfc-message")(1,"cfc-message-text",61),_.lg(2,62),_.R(3,mAl,3,1,"ng-container",63),_.R(4,nAl,2,1,"ng-template",null,64,_.Wg),_.mg(),_.I()());if(a&2){const b=_.yg(5);a=_.O();_.z(3);_.E("ngIf",a.bigtableToBigqueryEnabled)("ngIfElse",b)}},pAl=function(a){a&1&&(_.H(0,"div")(1,"mat-checkbox",67),_.M(2,68),_.I()())},qAl=function(a){a&1&&(_.H(0,"div",69),_.J(1,"bq-hive-partition-builder",70),_.I());a&2&&(a=_.O(),_.z(1),_.E("tableType",a.tableType))},rAl=function(a){a&1&&(_.H(0,
"mat-form-field"),_.J(1,"input",71),_.H(2,"mat-label"),_.M(3,72),_.I(),_.H(4,"cfc-help-button",73),_.lg(5,74),_.J(6,"p"),_.H(7,"p"),_.J(8,"b"),_.I(),_.H(9,"p"),_.J(10,"b"),_.I(),_.J(11,"p"),_.mg(),_.I()())},sAl=function(a){a&1&&(_.H(0,"cfc-message")(1,"cfc-message-text",61),_.lg(2,75),_.J(3,"a",76),_.mg(),_.I()());a&2&&(a=_.O(),_.z(3),_.E("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_DATASTORE_LOADING_CLOUD_DATASTORE_BACKUP_DATA))},tAl=function(a,b){a.controls.gcsLocation.disable();
a.controls.selectedFile.disable();a.controls.driveUri.disable();a.controls.s3Path.disable();a.controls.absPath.disable();switch(b){case "GCS":a.controls.gcsLocation.enable();break;case "UPLOAD":a.controls.selectedFile.enable();break;case "DRIVE":a.controls.driveUri.enable();break;case "S3":a.controls.s3Path.enable();break;case "ABS":a.controls.absPath.enable()}a.updateValueAndValidity()},xAl=function({fb:a,model:b}){var c=a.group,d=[null==b?void 0:b.selectedSource],e=[{value:null==b?void 0:b.gcsLocation,
disabled:!0},_.Qv],f=[{value:(null==b?0:b.selectedFile)?null==b?void 0:b.selectedFile:void 0,disabled:!0},[_.Qv,_.b9c(104857600)]],g=[{value:null==b?void 0:b.driveUri,disabled:!0},[_.Qv,_.Sj(uAl)]],l=[{value:null==b?void 0:b.s3Path,disabled:!0},[_.Qv,_.Sj(vAl)]],p=[{value:null==b?void 0:b.absPath,disabled:!0},[_.Qv,_.Sj(wAl)]],u=[null==b?void 0:b.selectedFileFormat],v=[null==b?void 0:b.selectedHivePartitioning],w=[null==b?void 0:b.sheetRange];var y=null==b?void 0:b.hivePartitioningOptions;var C=null==
b?void 0:b.hivePartitioningSchema;y=a.group({hiveTableLocation:[null==y?void 0:y.sourceUriPrefix],requirePartitionFilter:[null==y?void 0:y.requirePartitionFilter],mode:[null==y?void 0:y.mode],schema:_.R2i({fb:a,fields:(null==C?void 0:C.fields)||[]})});a=c.call(a,{selectedSource:d,gcsLocation:e,selectedFile:f,driveUri:g,s3Path:l,absPath:p,selectedFileFormat:u,selectedHivePartitioning:v,sheetRange:w,partition:y});tAl(a,null==b?void 0:b.selectedSource);return a},yAl=function(a){a&1&&(_.H(0,"section"),
_.J(1,"bq-create-table-form-destination",2),_.I());if(a&2){a=_.O().ngIf;const b=_.O();_.z(1);_.E("selectedSource",b.selectedSource.value)("tableTypeOptions",a)}},zAl=function(a){a&1&&(_.H(0,"section"),_.K(1),_.J(2,"bq-create-table-form-schema",3),_.L(),_.I());a&2&&(a=_.O(2),_.z(2),_.E("selectedSource",a.selectedSource.value)("sourceFormat",a.selectedFileFormat.value)("allowTypeParameters",a.allowTypeParameters)("selectedTableType",a.selectedTableType.value))},AAl=function(a,b){a&1&&(_.K(0),_.J(1,
"bq-create-table-form-partition",4),_.L());a&2&&(a=b.ngIf,_.z(1),_.E("schema",a.schema))},CAl=function(a){a&1&&(_.H(0,"section"),_.R(1,AAl,2,1,"ng-container",1),_.V(2,"async"),_.I());a&2&&(a=_.O(2),_.z(1),_.E("ngIf",_.Fg(3,BAl,_.W(2,1,a.schemaDebounced$))))},DAl=function(a){a&1&&(_.H(0,"section"),_.J(1,"bq-create-table-form-advanced",5),_.V(2,"async"),_.I());a&2&&(a=_.O(2),_.z(1),_.E("source",a.selectedSource.value)("sourceFormat",a.selectedFileFormat.value)("tableType",a.selectedTableType.value)("tableLocation",
_.W(2,4,a.tableLocation$)))},EAl=function(a){a&1&&(_.K(0),_.R(1,yAl,2,2,"section",1),_.R(2,zAl,3,4,"section",1),_.R(3,CAl,3,5,"section",1),_.R(4,DAl,3,6,"section",1),_.L());a&2&&(a=_.O(),_.z(1),_.E("ngIf",a.canSourceHaveDestination),_.z(1),_.E("ngIf",a.selectedSource.value!==a.SOURCE.BIGTABLE),_.z(1),_.E("ngIf",a.isNativeTable),_.z(1),_.E("ngIf",a.sourceHasAdvancedOptions))},FAl=function({fb:a,model:b}){return a.group({source:xAl({fb:a,model:b}),destination:Mzl({fb:a,model:b}),schema:Tzl({fb:a,model:b}),
partition:Nzl({fb:a,model:b}),advanced:zzl({fb:a,model:b})})},HAl=function(a){var b=Object,c=b.assign,d=a.get("source"),e=d.value;d=d.get("partition");var f=d.value,g={};f.hiveTableLocation&&(g.sourceUriPrefix=f.hiveTableLocation);d.controls.requirePartitionFilter.disabled||(g.requirePartitionFilter=!!f.requirePartitionFilter);if(f.mode&&(g.mode=f.mode,"CUSTOM"===f.mode)){var l=[];try{l=_.W2i(d.get("schema"))}catch(T){l=[]}l={fields:l}}const {options:p,schema:u}={options:g,schema:l};d={selectedSource:e.selectedSource,
selectedFileFormat:e.selectedFileFormat,sheetRange:e.sheetRange,selectedHivePartitioning:e.selectedHivePartitioning,hivePartitioningOptions:p,hivePartitioningSchema:u};switch(d.selectedSource){case "GCS":d.gcsLocation=e.gcsLocation;break;case "UPLOAD":d.selectedFile=e.selectedFile;break;case "DRIVE":d.driveUri=e.driveUri;break;case "S3":d.s3Path=e.s3Path;break;case "ABS":d.absPath=e.absPath}e=a.get("destination");g=e.value;e={selectedTableType:g.selectedTableType,awsConnection:g.awsConnection,azureConnection:g.azureConnection,
cloudResourceConnection:g.cloudResourceConnection,selectedCloudResourceConnection:g.selectedCloudResourceConnection,tableLocation:_.dMk(e.get("location"))};g=Uzl(a.get("schema"));var v;l=a.get("partition");var w=l.get("partitioning"),y=w.value;f=y.partitioning;y.requirePartitionFilter&&(f.requirePartitionFilter=y.requirePartitionFilter);if(w=w.get("rangePartition")){var C=w.value.start;y=w.value.end;w=w.value.interval;var F={field:null==(v=f.partition)?void 0:v.field,range:{start:C,end:y,interval:w}};
f.partition=F}else if(1===f.type&&y.type){v={type:y.type};if(null==(C=f.partition)?0:C.field)v.field=f.partition.field;f.partition=v}v={selectedPartitioning:f,selectedClustering:ryl(l.get("clustering"))};a=a.get("advanced");C=a.value;l=C.selectedWriteDisposition;f=C.maxBadRecords;w=C.shouldIgnoreUnknownValues;y=C.skipLeadingRows;F=a.get("delimiter").value;F="custom"===F.delimiter?F.customDelimiter:F.delimiter;const G=a.get("quote").value;C={selectedWriteDisposition:l,maxBadRecords:f,shouldIgnoreUnknownValues:w,
skipLeadingRows:y,delimiter:F,quote:"custom"===G.quote?G.customQuote:G.quote,shouldAllowQuotedNewlines:C.shouldAllowQuotedNewlines,shouldAllowJaggedRows:C.shouldAllowJaggedRows,defaultCollation:_.V0i(a.get("defaultCollation")),defaultRoundingMode:_.a1i(a.get("defaultRoundingMode"))};if(a=_.W1g(a.get("kmsPicker")))C.encryptionConfiguration={kmsKeyName:a};return c.call(b,{},GAl,d,e,g,v,C)},IAl=function(a){a&1&&(_.H(0,"div",11),_.J(1,"mat-spinner",12),_.I());a&2&&(_.z(1),_.E("diameter",18))},JAl=function(a){a&
1&&(_.H(0,"form",13),_.J(1,"cfc-form-submission-error")(2,"bq-create-table-form",14),_.I());a&2&&(a=_.O(),_.E("formGroup",a.form))},KAl=function(a){switch(((a||"").split(".").pop()||"").toLowerCase()){case "avro":return"AVRO";case "json":return"NEWLINE_DELIMITED_JSON";case "orc":return"ORC";case "parquet":return"PARQUET";case "iceberg":return"ICEBERG";default:return"CSV"}},LAl=function({data:a,loadJobConfig:b}={}){var c=Object.assign({},GAl);if(null==a?0:a.gcsLocation)c=Object.assign({},c,{selectedSource:"GCS",
gcsLocation:null==a?void 0:a.gcsLocation,selectedFileFormat:KAl(null==a?void 0:a.gcsLocation)});if(b){var d=Object,e=d.assign;const f=Object.assign({},GAl,{tableLocation:b.destinationTable,selectedClustering:b.clustering,selectedTableType:"NATIVE",shouldAutoDetectSchema:!!b.autodetect,shouldAllowQuotedNewlines:!!b.allowQuotedNewlines,shouldAllowJaggedRows:!!b.allowJaggedRows,shouldIgnoreUnknownValues:!!b.ignoreUnknownValues}),g=b.sourceUris&&b.sourceUris[0];if(!g)f.selectedSource="UPLOAD";else if(void 0===
g?0:g.startsWith("gs://"))f.selectedSource="GCS",f.gcsLocation=(void 0===g?0:g.startsWith("gs://"))?g.substr(5):"";void 0!==b.sourceFormat&&(f.selectedFileFormat=b.sourceFormat);void 0!==b.schema&&(f.schema=b.schema);void 0!==b.writeDisposition&&(f.selectedWriteDisposition=b.writeDisposition);b.timePartitioning?f.selectedPartitioning=oyl(1,b.timePartitioning):b.rangePartitioning&&(f.selectedPartitioning=oyl(2,b.rangePartitioning));void 0!==b.maxBadRecords&&(f.maxBadRecords=b.maxBadRecords);void 0!==
b.fieldDelimiter&&(f.delimiter=b.fieldDelimiter);void 0!==b.quote&&(f.quote=b.quote);void 0!==b.skipLeadingRows&&(f.skipLeadingRows=b.skipLeadingRows);c=e.call(d,{},c,f)}return c=Object.assign({},c,(null==a?void 0:a.initialValues)||{})},MAl=function(a,b,c,d){a.sendEvent({type:"bqTableCreate",name:"trackCreateTableSubmitSuccess",metadata:{source:b,fileFormat:c,tableType:d}})},NAl={type:1,path:"/bigquery/docs/clustered-tables"},OAl={type:1,path:"/bigquery/docs/create-bigtable-external-table"},PAl={type:1,
path:"/bigquery/docs/loading-data-cloud-datastore#loading_cloud_datastore_backup_data"},QAl={type:1,path:"/bigquery/docs/loading-data-local"},RAl={type:1,path:"/bigquery/docs/partitioned-tables"},SAl={type:1,path:"/bigquery/docs/querying-partitioned-tables"},TAl={type:1,path:"/bigquery/docs/tables-intro"},UAl={type:1,path:"/bigquery/external-data-bigtable"},VAl={type:1,path:"/bigquery/external-data-cloud-storage#wildcard-support"},WAl={EMPTY_TABLE:"EMPTY_TABLE",GCS:"GCS",UPLOAD:"UPLOAD",DRIVE:"DRIVE",
BIGTABLE:"BIGTABLE",S3:"S3",ABS:"ABS"},XAl={type:1,partition:{type:"DAY"},fieldType:"TIMESTAMP"},YAl={type:0,partition:void 0},ZAl=class{get formGroup(){return this.parentFormGroupName.control}constructor(a){this.parentFormGroupName=a;this.dl={CONSOLE__BIGQUERY_DOCS_CLUSTERED_TABLES:NAl};this.disabled=!1}ngOnChanges(a){!0===a.disabled.currentValue?this.formGroup.get("clustering").disable():this.formGroup.get("clustering").enable()}};ZAl.\u0275fac=function(a){return new (a||ZAl)(_.A(_.gw,8))};
ZAl.\u0275cmp=_.n({type:ZAl,selectors:[["bq-clustering-picker"]],inputs:{disabled:"disabled"},features:[_.Bg([_.cY],[_.cY]),_.Ad],decls:11,vars:2,consts:function(){return["type;text;formControlName;clustering;matInput;;placeholder;Comma-separated list of fields to define clustering order (up to 4)".split(";")," Clustering order "," Clustering order determines the sort order of the data. Clustering can be used on both partitioned and non-partitioned tables. ",["matSuffix","",1,"cfc-pre-wrap"],"\ufffd#8\ufffd Clustering organizes data based on the contents of specified columns in the schema into optimally-size storage blocks, which improves the performance of certain types of queries. \ufffd/#8\ufffd A schema field may be used for partitioning as well as clustering. BigQuery will partition first, and then cluster. \ufffd#9\ufffd Learn more \ufffd/#9\ufffd",
["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqClusteredTablesDocumentation","target","_blank",3,"cfcDocLink"],["matError","",4,"cfcDebounceErrorFor"],["matError",""]," Must contain a comma-separated list of field names. Field names can only contain letters, numbers, or underscores. "]},template:function(a,b){a&1&&(_.H(0,"mat-form-field"),_.J(1,"input",0),_.H(2,"mat-label"),_.M(3,1),_.I(),_.H(4,"mat-hint"),_.M(5,2),_.I(),_.H(6,"cfc-help-button",
3),_.lg(7,4),_.J(8,"p")(9,"a",5),_.mg(),_.I(),_.R(10,qyl,2,0,"cm-error",6),_.I());a&2&&(_.z(9),_.E("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_CLUSTERED_TABLES),_.z(1),_.E("cfcDebounceErrorFor","pattern"))},dependencies:[_.Xj,_.Uv,_.Dv,_.fK,_.bL,_.sJ,_.wy,_.dy,_.eK,_.fy,_.Au,_.wu,_.vu,_.dK,_.xu,_.my,_.ny,_.ky,_.iw],encapsulation:2});var $Al=[_.Lv,_.mK,_.Iw,_.tJ,_.yy,_.gy,_.oy,_.sw],aBl=class{};aBl.\u0275fac=function(a){return new (a||aBl)};aBl.\u0275mod=_.r({type:aBl});
aBl.\u0275inj=_.k({imports:[_.wp,_.rw,$Al]});var bBl=class{get formGroup(){return this.parentFormGroupName.control}get requirePartitionFilter(){return this.formGroup.controls.requirePartitionFilter}get mode(){return this.formGroup.controls.mode}get isCustomModeSelected(){return"CUSTOM"===this.mode.value}constructor(a){this.parentFormGroupName=a}ngOnChanges(a){a.tableType&&("EXTERNAL"===a.tableType.currentValue?this.requirePartitionFilter.enable():this.requirePartitionFilter.disable())}};
bBl.\u0275fac=function(a){return new (a||bBl)(_.A(_.gw,8))};
bBl.\u0275cmp=_.n({type:bBl,selectors:[["bq-hive-partition-builder"]],inputs:{tableType:"tableType"},features:[_.Bg([_.cY],[_.cY]),_.Ad],decls:22,vars:1,consts:function(){return["type text formControlName hiveTableLocation matInput  placeholder gs://bucket/path_to/table".split(" ")," Select Source URI Prefix ",["matSuffix","",1,"cfc-pre-wrap"]," The source URI prefix encodes the path where the user wants BigQuery to infer hive partitioning. ",[1,"cfc-form-control-wrapper"],["formControlName","requirePartitionFilter"],
" Require partition filter ",[1,"cfc-form-control-suffix","cfc-button-small"],["labelId","partition-inference-mode"]," Partition Inference Mode ","formControlName mode id hive-partition-mode aria-labelledby partition-inference-mode".split(" "),["value","AUTO"]," Automatically infer types ",["value","STRINGS"]," All columns are strings ",["value","CUSTOM"]," Provide my own ",["formGroupName","schema",4,"ngIf"],["formGroupName","schema"]]},template:function(a,b){a&1&&(_.H(0,"mat-form-field"),_.J(1,
"input",0),_.H(2,"mat-label"),_.M(3,1),_.I(),_.H(4,"cfc-help-button",2),_.M(5,3),_.I()(),_.H(6,"div",4)(7,"mat-checkbox",5),_.M(8,6),_.I(),_.H(9,"cfc-help-button",7),_.S(10," Requiring a partition filter means users must include a WHERE clause that can be used for partition elimination. Using a partition filter may reduce cost and improve performance. Note that this option is only available when creating an external table. "),_.I()(),_.H(11,"div")(12,"cfc-form-label",8),_.M(13,9),_.I(),_.H(14,"mat-radio-group",
10)(15,"mat-radio-button",11),_.M(16,12),_.I(),_.H(17,"mat-radio-button",13),_.M(18,14),_.I(),_.H(19,"mat-radio-button",15),_.M(20,16),_.I()()(),_.R(21,syl,2,0,"div",17));a&2&&(_.z(21),_.E("ngIf",b.isCustomModeSelected))},dependencies:[_.Xj,_.Uv,_.Vv,_.w6,_.Dv,_.kp,_.mL,_.wy,_.Qy,_.Ry,_.Oy,_.dy,_.fy,_.Au,_.wu,_.xu,_.my,_.ny,_.ky,_.fA,_.eA,_.gA,_.cA,_.dA,_.iw,_.gw],encapsulation:2});var cBl=[_.Lv,_.wp,_.nL,_.yy,_.Sy,_.gy,_.oy,_.hA,_.sw],dBl=class{};dBl.\u0275fac=function(a){return new (a||dBl)};
dBl.\u0275mod=_.r({type:dBl});dBl.\u0275inj=_.k({imports:[_.rw,_.x6,cBl]});var Jyl=function(){return["invalid-format","below-min"]},eBl=function(a){const b=[],c=new Set;if(a.schema&&a.schema.fields){var d=a.schema.fields;for(const g of d)if((tyl(g,"TIMESTAMP")||tyl(g,"DATE")||tyl(g,"INTEGER")||a.isDatetimeMonthlyYearlyEnabled&&tyl(g,"DATETIME"))&&g.name&&"repeated"!=(g.mode||"NULLABLE").toLowerCase()&&g.name){d=b;var e=d.push;if(tyl(g,"INTEGER"))var f=oyl(2,{field:g.name});else f=oyl(1,{field:g.name}),tyl(g,"TIMESTAMP")?f.fieldType="TIMESTAMP":tyl(g,"DATE")?f.fieldType=
"DATE":tyl(g,"DATETIME")&&(f.fieldType="DATETIME");e.call(d,f);c.add(g.name)}}a.columnPartitioningOptions=b},fBl=class{get formGroup(){return this.parentFormGroupName.control}get partitioningControl(){return this.formGroup.controls.partitioning}get isHourlyPartitioningSupported(){return!!this.partitioningControl.value&&("TIMESTAMP"===this.partitioningControl.value.fieldType||"DATETIME"===this.partitioningControl.value.fieldType)}get isMultipleTimeGranularitiesSupported(){return this.isDatetimeMonthlyYearlyEnabled?
!!this.partitioningControl.value&&1===this.partitioningControl.value.type:!!this.partitioningControl.value&&"TIMESTAMP"===this.partitioningControl.value.fieldType}get isRangePartitioningSelected(){return!!this.partitioningControl.value&&2===this.partitioningControl.value.type}get isPartitioningSelected(){return!!this.partitioningControl.value&&0!==this.partitioningControl.value.type}constructor(a,b){this.parentFormGroupName=a;this.fb=b;this.dl={CONSOLE__BIGQUERY_DOCS_PARTITIONED_TABLES:RAl,CONSOLE__BIGQUERY_DOCS_QUERYING_PARTITIONED_TABLES:SAl};
this.regularPartitioningOptions=[YAl,XAl];this.columnPartitioningOptions=[];this.isDatetimeMonthlyYearlyEnabled=_.Lc("BigqueryMonthlyYearlyPartitioning__enabled");this.destroy$=new _.Ef}ngOnInit(){this.partitioningControl.valueChanges.pipe(_.Mf(this.destroy$)).subscribe(()=>{this.isRangePartitioningSelected?this.formGroup.addControl("rangePartition",Oyl(this.fb)):this.formGroup.removeControl("rangePartition");this.formGroup.updateValueAndValidity()})}ngOnChanges(a){if(a.schema){const b=c=>!c||!c.fields||
0===c.fields.length;b(a.schema.currentValue)&&b(a.schema.previousValue)||eBl(this)}}ngOnDestroy(){this.destroy$.next()}};fBl.\u0275fac=function(a){return new (a||fBl)(_.A(_.gw,8),_.A(_.qw))};
fBl.\u0275cmp=_.n({type:fBl,selectors:[["bq-partition-builder"]],inputs:{schema:"schema"},features:[_.Bg([_.cY],[_.cY]),_.Ad],decls:20,vars:7,consts:function(){return[["id","partition-dropdown-label"]," Partitioning ","formControlName;partitioning;aria-labelledby;partition-dropdown-label;optionsAriaLabel;Partitioning options;id;partitiong-dropdown".split(";"),["label","Options"],[3,"value",4,"ngFor","ngForOf"],["label","Partition by field",4,"ngIf"],["matSuffix","",1,"cfc-pre-wrap"]," Partitioning divides your table into smaller segments. Partitioned tables can be queried using filters based on the partitioning column that reduce the amount of data to scan, which can control costs and improve query performance. \ufffd#11\ufffd Learn more \ufffd/#11\ufffd",
["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqCreateTablePartitionDocumentation","target","_blank",3,"cfcDocLink"],["matError","",4,"cfcDebounceErrorFor"],[4,"ngIf"],["formGroupName","rangePartition",4,"ngIf"],["paritioningFilterTooltipTemplate",""],["paritioningTypeTooltipTemplate",""],[3,"value"],["label","Partition by field"],["matError",""]," If partitioning by field, you must select a TIMESTAMP, DATE, or INTEGER that is not REPEATED. ",
["labelId","paritioning-filter-heading"]," Partitioning filter \ufffd#3\ufffd\ufffd*4:1\ufffd\ufffd/*4:1\ufffd\ufffd/#3\ufffd",[3,"ngTemplateOutlet"],["role","group","aria-labelledby","paritioning-filter-heading"],["formControlName","requirePartitionFilter"]," Require WHERE clause to query data ",["labelId","partition-type-label"]," Partitioning type \ufffd#3\ufffd\ufffd*4:1\ufffd\ufffd/*4:1\ufffd\ufffd/#3\ufffd","formControlName type id partition-type aria-labelledby partition-type-label".split(" "),
["value","DAY"]," By day ",["value","HOUR"]," By hour ",["value","MONTH"]," By month ",["value","YEAR"]," By year ",["formGroupName","rangePartition"]," Start ",["align","end"]," Start value for range partitioning. The start value is inclusive. ","type;text;formControlName;start;matInput;;placeholder;Starting integer value".split(";")," End "," End value for range partitioning. The end value is exclusive. ","type;text;formControlName;end;matInput;;placeholder;Ending integer value".split(";")," Interval ",
" Interval value for range partitioning. The interval value must be a positive integer. ","type;text;formControlName;interval;matInput;;placeholder;Positive integer interval value".split(";")," Range start is required "," Range start must be a valid integer "," Range end is required "," Range end must be a valid integer "," Range interval is required "," Range interval must be a valid positive integer "," Requiring a partition filter means users must include a WHERE clause that specifies the partitions to query. Using a partition filter may reduce cost and improve performance. ",
["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqCreateTablePartitionFilterDocumentation","target","_blank",3,"cfcDocLink"]," Choose here between the day/hour/month/year option that will generate one partition per day/hour/month/year, respectively. "]},template:function(a,b){a&1&&(_.H(0,"div")(1,"mat-form-field")(2,"mat-label",0),_.M(3,1),_.I(),_.H(4,"cfc-select",2)(5,"mat-optgroup",3),_.R(6,uyl,3,4,"mat-option",4),_.I(),_.J(7,"cfc-select-divider"),
_.R(8,wyl,2,1,"mat-optgroup",5),_.I(),_.H(9,"cfc-help-button",6),_.lg(10,7),_.J(11,"a",8),_.mg(),_.I(),_.R(12,xyl,2,0,"cm-error",9),_.I(),_.R(13,zyl,8,1,"div",10),_.I(),_.R(14,Cyl,9,2,"div",10),_.R(15,Kyl,25,7,"div",11),_.R(16,Lyl,4,1,"ng-template",null,12,_.Wg),_.R(18,Myl,2,0,"ng-template",null,13,_.Wg));a&2&&(_.z(6),_.E("ngForOf",b.regularPartitioningOptions),_.z(2),_.E("ngIf",0<b.columnPartitioningOptions.length),_.z(3),_.E("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_PARTITIONED_TABLES),_.z(1),_.E("cfcDebounceErrorFor",
"required"),_.z(1),_.E("ngIf",b.isPartitioningSelected),_.z(1),_.E("ngIf",b.isMultipleTimeGranularitiesSupported),_.z(1),_.E("ngIf",b.isRangePartitioningSelected))},dependencies:function(){return[_.Xj,_.Uv,_.Vv,_.Dv,_.jp,_.kp,_.pp,_.fK,_.bL,_.sJ,_.mL,_.lL,_.wy,_.Qy,_.Ry,_.Oy,_.dy,_.eK,_.fy,_.Au,_.wu,_.vu,_.dK,_.xu,_.my,_.ny,_.ky,_.qk,_.Yy,_.fA,_.eA,_.gA,_.cA,_.dA,_.iw,_.gw,_.hz,_.lz,_.iK,gBl]},encapsulation:2});
var gBl=class{transform(a){if(0!==a.type){const b=pyl(a);if(void 0!==b&&!b.field)return"Partition by ingestion time";if(0!==a.type&&a.partition&&a.partition.field)return 0!==a.type&&a.partition.field?a.partition.field:"_PARTITIONTIME"}return"No partitioning"}};gBl.\u0275fac=function(a){return new (a||gBl)};gBl.\u0275pipe=_.rd({name:"partitionDisplayName",type:gBl,pure:!0});var hBl=[_.Lv,_.wp,_.mK,_.Iw,_.tJ,_.nL,_.yy,_.Sy,_.gy,_.oy,_.Zy,_.hA,_.sw,_.qz],iBl=class{};
iBl.\u0275fac=function(a){return new (a||iBl)};iBl.\u0275mod=_.r({type:iBl});iBl.\u0275inj=_.k({imports:[_.rw,hBl]});var jBl={AVRO:"AVRO",CSV:"CSV",DATASTORE_BACKUP:"DATASTORE_BACKUP",GOOGLE_SHEETS:"GOOGLE_SHEETS",ICEBERG:"ICEBERG",NEWLINE_DELIMITED_JSON:"NEWLINE_DELIMITED_JSON",PARQUET:"PARQUET",ORC:"ORC"};var GAl={selectedSource:"EMPTY_TABLE",selectedFileFormat:"AVRO",gcsLocation:"",selectedTableType:"NATIVE",shouldAutoDetectSchema:!1,schema:{fields:[]},selectedHivePartitioning:!1,hivePartitioningOptions:{sourceUriPrefix:"",mode:"AUTO"},hivePartitioningSchema:{fields:[]},selectedWriteDisposition:"WRITE_EMPTY",selectedPartitioning:YAl,maxBadRecords:0,shouldIgnoreUnknownValues:!1,delimiter:",",quote:'"',skipLeadingRows:0,shouldAllowQuotedNewlines:!1,shouldAllowJaggedRows:!1,sheetRange:"",selectedCloudResourceConnection:!1},
kBl=[{displayName:"CSV",format:"CSV",forbiddenSources:new Set,suffix:".csv"},{displayName:"JSONL (Newline delimited JSON)",format:"NEWLINE_DELIMITED_JSON",forbiddenSources:new Set,suffix:".json"},{displayName:"Avro",format:"AVRO",forbiddenSources:new Set,suffix:".avro"},{displayName:"Parquet",format:"PARQUET",forbiddenSources:new Set(["DRIVE"]),suffix:".parquet"},{displayName:"ORC",format:"ORC",forbiddenSources:new Set(["DRIVE"]),suffix:".orc"},{displayName:"Cloud Datastore Backup",format:"DATASTORE_BACKUP",
forbiddenSources:new Set(["UPLOAD","DRIVE","ABS","S3"])},{displayName:"Google Sheet",format:"GOOGLE_SHEETS",forbiddenSources:new Set(["EMPTY_TABLE","GCS","UPLOAD","ABS","S3"])},{displayName:"Iceberg",format:"ICEBERG",forbiddenSources:new Set(["DRIVE","UPLOAD","ABS"]),suffix:".metadata.json"}];var lBl=function(a){Xyl(a.config,a.model);return a},mBl=function(a){Yyl(a.config,a.model);return a},nBl=function(a){Zyl(a.config,a.model);return a},oBl=function(a){if(Ryl(a.model.selectedSource,a.model.selectedFileFormat)){var b=a.config,c=a.model;Wyl(b,c);b.skipLeadingRows=c.skipLeadingRows||0;c.shouldAutoDetectSchema&&(b.allowJaggedRows||delete b.allowJaggedRows,b.allowQuotedNewlines||delete b.allowQuotedNewlines,Number(c.skipLeadingRows)||delete b.skipLeadingRows)}return a},pBl=function(a){Syl(a.model.selectedSource,
a.model.selectedFileFormat)&&a.model.selectedJsonExtensionGeoJson&&(a.config.jsonExtension="GEOJSON");return a},qBl=class{constructor(a){this.model=a;this.config={};this.model=a;this.config.autodetect=Pyl(this.model.selectedSource,this.model.selectedFileFormat)||this.model.shouldAutoDetectSchema;this.config.autodetect||(this.config.schema=this.model.schema);this.config.destinationTable=this.model.tableLocation;this.config.writeDisposition=this.model.selectedWriteDisposition;this.config.destinationEncryptionConfiguration=
this.model.encryptionConfiguration}build(){return this.config}};var dzl=function(){return["maxlength","required"]},xzl=new Set(Object.values({COMMA:",",TAB:"\t",PIPE:"|"})),rBl=class{get formGroup(){return this.parentFormGroupName.control}get delimiter(){return this.formGroup.controls.delimiter}get customDelimiter(){return this.formGroup.controls.customDelimiter}get isCustom(){return"custom"===this.delimiter.value}constructor(a){this.parentFormGroupName=a;this.delimiterOptions=[{displayName:"Comma",format:","},{displayName:"Tab",format:"\t"},{displayName:"Pipe",
format:"|"},{displayName:"Custom",format:"custom"}];this.destroy$=new _.Ef}ngOnInit(){this.delimiter.valueChanges.pipe(_.Mf(this.destroy$)).subscribe(a=>{"custom"===a?this.customDelimiter.enable():this.customDelimiter.disable();this.formGroup.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};rBl.\u0275fac=function(a){return new (a||rBl)(_.A(_.gw,8))};
rBl.\u0275cmp=_.n({type:rBl,selectors:[["bq-delimiter-selector"]],features:[_.Bg([_.cY],[_.cY])],decls:8,vars:2,consts:function(){return[["aria-labelledby","delimiter-label","formControlName","delimiter"],[3,"value",4,"ngFor","ngForOf"],["id","delimiter-label"]," Field delimiter ",["matSuffix","","ariaLabel","Help with field delimiter",1,"cfc-pre-wrap"]," A field delimiter is a character that separates cells in a CSV table. ",[4,"ngIf"],[3,"value"],"type text formControlName customDelimiter maxlength 1 matInput ".split(" "),
" Custom field delimiter "," Enter the character of the delimiter used to separate columns in your input file. ",["matError","",4,"cfcDebounceErrorFor"],["matError",""]," Custom delimiters must be one character long. "]},template:function(a,b){a&1&&(_.H(0,"mat-form-field")(1,"cfc-select",0),_.R(2,bzl,2,2,"mat-option",1),_.I(),_.H(3,"mat-label",2),_.M(4,3),_.I(),_.H(5,"cfc-help-button",4),_.M(6,5),_.I()(),_.R(7,ezl,7,2,"mat-form-field",6));a&2&&(_.z(2),_.E("ngForOf",b.delimiterOptions),_.z(5),_.E("ngIf",
b.isCustom))},dependencies:[_.Dv,_.jp,_.kp,_.fK,_.wy,_.dy,_.eK,_.fy,_.Au,_.wu,_.vu,_.dK,_.xu,_.my,_.ny,_.ky,_.Xj,_.Uv,_.mw,_.iw,_.hz,_.qk,_.lz],encapsulation:2});var sBl=[_.Lv,_.wp,_.mK,_.yy,_.gy,_.oy,_.sw,_.qz],tBl=class{};tBl.\u0275fac=function(a){return new (a||tBl)};tBl.\u0275mod=_.r({type:tBl});tBl.\u0275inj=_.k({imports:[_.Iw,sBl]});var hzl=function(){return["maxlength","required"]},yzl=new Set(Object.values({DOUBLE_QUOTE:'"',SINGLE_QUOTE:"'",NONE:""})),uBl=class{get formGroup(){return this.parentFormGroupName.control}get quote(){return this.formGroup.controls.quote}get customQuote(){return this.formGroup.controls.customQuote}get isCustom(){return"custom"===this.quote.value}constructor(a){this.parentFormGroupName=a;this.quoteOptions=[{displayName:"Double quote",format:'"'},{displayName:"Single quote",format:"'"},{displayName:"None",
format:""},{displayName:"Custom",format:"custom"}];this.destroy$=new _.Ef}ngOnInit(){this.quote.valueChanges.pipe(_.Mf(this.destroy$)).subscribe(a=>{"custom"===a?this.customQuote.enable():this.customQuote.disable();this.formGroup.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};uBl.\u0275fac=function(a){return new (a||uBl)(_.A(_.gw,8))};
uBl.\u0275cmp=_.n({type:uBl,selectors:[["bq-quote-selector"]],features:[_.Bg([_.cY],[_.cY])],decls:8,vars:2,consts:function(){return[["aria-labelledby","quote-label","formControlName","quote"],[3,"value",4,"ngFor","ngForOf"],["id","quote-label"]," Quote character ",["matSuffix","","ariaLabel","Help with quote character",1,"cfc-pre-wrap"]," A quote character is used to quote data sections in a CSV file. ",[4,"ngIf"],[3,"value"],"type text formControlName customQuote maxlength 1 matInput ".split(" "),
" Custom quote character "," Enter the character used to quote data sections in your input file. ",["matError","",4,"cfcDebounceErrorFor"],["matError",""]," Custom quotes must be one character long. "]},template:function(a,b){a&1&&(_.H(0,"mat-form-field")(1,"cfc-select",0),_.R(2,fzl,2,2,"mat-option",1),_.I(),_.H(3,"mat-label",2),_.M(4,3),_.I(),_.H(5,"cfc-help-button",4),_.M(6,5),_.I()(),_.R(7,izl,7,2,"mat-form-field",6));a&2&&(_.z(2),_.E("ngForOf",b.quoteOptions),_.z(5),_.E("ngIf",b.isCustom))},dependencies:[_.Dv,
_.jp,_.kp,_.fK,_.wy,_.dy,_.eK,_.fy,_.Au,_.wu,_.vu,_.dK,_.xu,_.my,_.ny,_.ky,_.Xj,_.Uv,_.mw,_.iw,_.hz,_.qk,_.lz],encapsulation:2});var vBl=[_.Lv,_.wp,_.mK,_.yy,_.gy,_.oy,_.sw,_.qz],wBl=class{};wBl.\u0275fac=function(a){return new (a||wBl)};wBl.\u0275mod=_.r({type:wBl});wBl.\u0275inj=_.k({imports:[_.Iw,vBl]});var xBl=class{set tableLocation(a){this.tableLocation$.next(a)}get createTableFormArray(){return this.parentFormGroupName.control}get isGoogleSheets(){return Tyl(this.sourceFormat,this.source)}get isEmptyTable(){return Vyl(this.source)}get isNativeTable(){return"NATIVE"===this.tableType}get canSetWritePreference(){return Vyl(this.source)?!1:"NATIVE"===this.tableType}get fileFormatAllowsErrors(){return Uyl(this.sourceFormat,this.source)}get isCsv(){return Ryl(this.source,this.sourceFormat)}get isNewlineDelimitedJson(){return Syl(this.source,
this.sourceFormat)}get canSkipHeadersAndTrailingColumns(){var a=this.source,b=this.sourceFormat;return Ryl(a,b)||Tyl(b,a)}constructor(a,b,c,d){this.parentFormGroupName=a;this.projectParamService=b;this.datasetsFacadeService=c;this.locationsFacade=d;this.i18n={MSG_BQ_ADVANCED_OPTIONS:"Advanced options"};this.source="EMPTY_TABLE";this.SOURCE=WAl;this.tableLocation$=new _.Bf;this.kmsLocation$=this.tableLocation$.pipe(_.Kf(e=>e?_.y_(this.datasetsFacadeService,{datasetId:e.datasetId,projectId:e.projectId}):
_.B(void 0)),_.Nc(_.$Pb)?_.Kf(e=>{const f=null==e?void 0:e.location;return f?_.Bv(this.locationsFacade,_.Jt(this.projectParamService),"FEATURE_COMMON").pipe(_.D(g=>(g=_.GGa(f,new Set(g)))?_.tzg(g):void 0)):_.B(void 0)}):_.D(e=>{let f;return(null==_.Av?void 0:null==(f=_.Av[(null==e?void 0:e.location)||""])?void 0:f.keyRegion)||void 0}),_.cf(()=>_.B(void 0)));this.writeDispositionOptions=_.JLk;this.currentProjectIdObs$=this.projectParamService.getCurrentProjectId()}};
xBl.\u0275fac=function(a){return new (a||xBl)(_.A(_.gw,8),_.A(_.Kt),_.A(_.z_),_.A(_.Cv))};
xBl.\u0275cmp=_.n({type:xBl,selectors:[["bq-create-table-form-advanced"]],inputs:{source:"source",sourceFormat:"sourceFormat",tableType:"tableType",tableLocation:"tableLocation"},features:[_.Bg([_.cY],[_.cY])],decls:15,vars:13,consts:function(){return[[3,"unfolded"],[3,"headingLevel"],[4,"ngIf"],["class","cfc-form-control-wrapper",4,"ngIf"],["formGroupName","delimiter",4,"ngIf"],["formGroupName","quote",4,"ngIf"],["formGroupName","kmsPicker",4,"ngIf"],["formGroupName","defaultCollation",3,"isTable",
4,"ngIf"],["formGroupName","defaultRoundingMode",3,"isTable","isUpdate"],["aria-labelledby","write-preference-label","formControlName","selectedWriteDisposition"],[3,"value",4,"ngFor","ngForOf"],["id","write-preference-label"]," Write preference ",[3,"value"],"cfcNumberInput  min 0 formControlName maxBadRecords matInput ".split(" ")," Number of errors allowed ",["matSuffix","",1,"cfc-pre-wrap"]," Enter the maximum number of rows containing errors that can be ignored. If the number of rows with errors exceeds this value, the job will result in an 'invalid' message and fail. ",
["matError","",4,"cfcDebounceErrorFor"],["matError",""]," Number of errors allowed must be greater than 0 "," Value must be a number. ",[1,"cfc-form-control-wrapper"],["formControlName","shouldIgnoreUnknownValues"]," Unknown values ",[1,"cfc-form-control-suffix","cfc-button-small"]," When enabled, rows with extra column values that do not match the schema will be ignored and will not be imported into BigQuery. \ufffd#5\ufffdLearn more\ufffd/#5\ufffd","cfcDocHref;CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_STORAGE_CSV_LOADING_CSV_DATA_INTO_A_TABLE;cfcTrackedEvent;;aria-label;Learn more about ignore unknown values option;track-type;navigateTo;track-name;bqCreateTableAllowJaggedRowsDocumentation;target;_blank".split(";"),
["formGroupName","delimiter"],["formGroupName","quote"],"cfcNumberInput  min 0 formControlName skipLeadingRows matInput ".split(" ")," Header rows to skip "," Enter the number of rows to skip from the top of the CSV file. ",["formControlName","shouldAllowQuotedNewlines"]," Quoted newlines "," Enable to include newlines contained in quoted data sections in the cell\u2019s value. When disabled, newlines will signal a new row. ",["formControlName","shouldAllowJaggedRows"]," Jagged rows ",["ariaLabel",
"Help with learning more about jagged rows.",1,"cfc-form-control-suffix","cfc-button-small"]," Enable to accept rows that are missing trailing optional columns. Missing values will be treated as nulls. \ufffd#19\ufffdLearn more\ufffd/#19\ufffd","cfcDocHref;CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_STORAGE_CSV_LOADING_CSV_DATA_INTO_A_TABLE;cfcTrackedEvent;;aria-label;Learn more about jagged rows.;track-type;navigateTo;track-name;bqCreateTableAllowJaggedRowsDocumentation;target;_blank".split(";")," Number of rows to skip must be greater than 0 ",
" Value must be a number. ",["formControlName","selectedJsonExtensionGeoJson"]," Newline delimited GeoJSON "," When enabled, file will be parsed as newline-delimited GeoJSON instead of regular newline-delimited JSON. ",["formGroupName","kmsPicker"],[3,"projectId","locationId"],["formGroupName","defaultCollation",3,"isTable"]]},template:function(a,b){a&1&&(_.H(0,"cfc-unfold",0)(1,"cfc-unfold-header",1)(2,"h2"),_.S(3),_.I()(),_.H(4,"cfc-unfold-hidden-content"),_.R(5,kzl,6,3,"mat-form-field",2),_.R(6,
nzl,8,2,"mat-form-field",2),_.R(7,ozl,6,0,"div",3),_.R(8,pzl,1,0,"bq-delimiter-selector",4),_.R(9,qzl,1,0,"bq-quote-selector",5),_.R(10,uzl,21,3,"div",2),_.R(11,vzl,4,6,"div",6),_.R(12,wzl,1,1,"bq-collation-picker",7),_.H(13,"div"),_.J(14,"bq-default-rounding-mode-picker",8),_.I()()());a&2&&(_.E("unfolded",!1),_.z(1),_.E("headingLevel",2),_.z(2),_.zg(b.i18n.MSG_BQ_ADVANCED_OPTIONS),_.z(2),_.E("ngIf",b.canSetWritePreference),_.z(1),_.E("ngIf",b.fileFormatAllowsErrors),_.z(1),_.E("ngIf",!b.isEmptyTable),
_.z(1),_.E("ngIf",b.isCsv),_.z(1),_.E("ngIf",b.isCsv),_.z(1),_.E("ngIf",b.canSkipHeadersAndTrailingColumns),_.z(1),_.E("ngIf",b.isNativeTable),_.z(1),_.E("ngIf",b.isNativeTable),_.z(2),_.E("isTable",!0)("isUpdate",!1))},dependencies:[_.Dv,_.b1i,_.jp,_.kp,_.fK,rBl,_.Dw,_.sJ,_.EV,_.wy,_.s1,_.Qy,_.Ry,_.Oy,_.dy,_.eK,_.fy,_.Au,_.wu,_.dK,_.xu,_.my,_.ny,_.ky,_.wV,_.e1i,uBl,_.Xj,_.Uv,_.Vv,_.iw,_.gw,_.hz,_.qk,_.lz,_.yV,_.zV,_.AV,_.qp,_.sp],encapsulation:2});var yBl=class{transform(a){switch(a){case "EMPTY_TABLE":return"Empty table";case "GCS":return"Google Cloud Storage";case "UPLOAD":return"Upload";case "DRIVE":return"Drive";case "BIGTABLE":return"Google Bigtable";case "S3":return"Amazon S3";case "ABS":return"Azure Blob Storage";default:return""}}};yBl.\u0275fac=function(a){return new (a||yBl)};yBl.\u0275pipe=_.rd({name:"sourceDisplayName",type:yBl,pure:!0});
var zBl=class{transform(a){switch(a){case "EXTERNAL":return"External table";case "NATIVE":return"Native table";default:return""}}};zBl.\u0275fac=function(a){return new (a||zBl)};zBl.\u0275pipe=_.rd({name:"tableTypeDisplayName",type:zBl,pure:!0});var ABl=class{transform(a){const {locationId:b,connectionId:c}=_.u1(null==a?void 0:a.name);return`${b}.${c}`}};ABl.\u0275fac=function(a){return new (a||ABl)};ABl.\u0275pipe=_.rd({name:"s3ConnectionDisplayName",type:ABl,pure:!0});
var BBl=class{transform(a){const {locationId:b,connectionId:c}=_.u1(null==a?void 0:a.name);return`${b}.${c}`}};BBl.\u0275fac=function(a){return new (a||BBl)};BBl.\u0275pipe=_.rd({name:"absConnectionDisplayName",type:BBl,pure:!0});var CBl=class{transform(a){const {locationId:b,connectionId:c}=_.u1(null==a?void 0:a.name);return`${b}.${c}`}};CBl.\u0275fac=function(a){return new (a||CBl)};CBl.\u0275pipe=_.rd({name:"cloudResourceConnectionDisplayName",type:CBl,pure:!0});var Ezl=function(){return["bigquery.connections.list"]},Dzl=function(a,b){const c={};switch(b){case "AWS":c.aws={};break;case "AZURE":c.azure={};break;case "CLOUD_RESOURCE":c.cloudResource={}}a.getSelectedTableRef().pipe(_.nf(1),_.D(d=>_.wMk(c,null==d?void 0:d.projectId)),_.Kf(d=>a.subtaskService.open(_.xMk,d))).subscribe(d=>{d.onAccept.subscribe(()=>{a.refreshConnections$.next()})})},DBl=class{set selectedSource(a){this.selectedSource$.next(a)}get createTableFormArray(){return this.parentFormGroupName.control}get selectedTableType(){return this.createTableFormArray.get("selectedTableType")}get location(){return this.createTableFormArray.get("location")}get isExternalTable(){return"EXTERNAL"===
this.selectedTableType.value}get selectedCloudResourceConnection(){return this.createTableFormArray.get("selectedCloudResourceConnection")}get cloudResourceConnection(){return this.createTableFormArray.get("cloudResourceConnection")}constructor(a,b,c,d,e,f){this.parentFormGroupName=a;this.datasetsFacadeService=b;this.connectionsFacadeService=c;this.errorService=d;this.subtaskService=e;this.locationsFacade=f;this.dl={CONSOLE__BIGQUERY_DOCS_TABLES_INTRO:TAl};this.tableTypeOptions=[];this.selectedSource$=
new _.Bf(1);this.isS3Source$=this.selectedSource$.pipe(_.D(g=>"S3"===g));this.isAbsSource$=this.selectedSource$.pipe(_.D(g=>"ABS"===g));this.isGcsSource$=this.selectedSource$.pipe(_.D(g=>"GCS"===g));this.refreshConnections$=new _.Bf;this.destroy$=new _.Ef;this.SOURCE=WAl;this.ADD_DATA_GUIDE_DESTINATION_SECTION_STEP="bq-add-data-guide-destination-section";this.canGetConnections$=_.Ge([this.isS3Source$,this.isAbsSource$,this.isGcsSource$]).pipe(_.Kf(()=>_.B(!0)),_.Gf(1),_.Mf(this.destroy$));this.connections$=
_.B([]);this.getSelectedTableRef=()=>this.location.valueChanges.pipe(_.Jf({}),_.Mf(this.destroy$),_.D(()=>_.dMk(this.location)));this.getLocationForTableRef=g=>_.y_(this.datasetsFacadeService,g).pipe(_.D(l=>(null==l?void 0:l.location)||"US"),_.cf(()=>_.B("US")));this.fetchConnections=(g,l)=>this.connectionsFacadeService.listConnections({projectId:g,locationId:l}).pipe(_.Kf(p=>_.Ge([_.B(p),this.isS3Source$,this.isAbsSource$,this.isGcsSource$])),_.D(([p,u,v,w])=>{p=p.filter(y=>_.u1(null==y?void 0:y.name).locationId.toLowerCase()===
l.toLowerCase());u?p=p.filter(y=>!!y.aws):v?p=p.filter(y=>!!y.azure):w&&(p=p.filter(y=>!!y.cloudResource));return p}))}ngOnInit(){this.refreshConnections$.next();this.connectionsLocation$=this.getSelectedTableRef().pipe(_.Kf(a=>this.getLocationForTableRef(a)));this.awsLocations$=this.getSelectedTableRef().pipe(_.Kf(a=>this.locationsFacade.listLocations(null==a?void 0:a.projectId,"OMNI_AWS")));this.azureLocations$=this.getSelectedTableRef().pipe(_.Kf(a=>this.locationsFacade.listLocations(null==a?void 0:
a.projectId,"OMNI_AZURE")));this.incorrectDatasetLocation$=_.Ge([this.connectionsLocation$,this.selectedSource$,this.awsLocations$,this.azureLocations$]).pipe(_.D(([a,b,c,d])=>{{let e=[];switch(b){case "ABS":e=_.Lc("BigqueryUseLocationServiceForConnections__enabled")?d:["azure-eastus2"];break;case "S3":_.Lc("BigqueryUseLocationServiceForConnections__enabled")?e=c:(e=["aws-us-east-1"],_.Lc("AwsApNortheast2RegionReveal__enabled")&&e.push("aws-ap-northeast-2"))}a=e.length&&!e.includes(a)?e:void 0}return a}));
this.connections$=this.canGetConnections$.pipe(_.We(a=>!!a),_.Kf(()=>this.getSelectedTableRef()),_.Kf(a=>_.Ge([_.B(null==a?void 0:a.projectId),this.connectionsLocation$,this.refreshConnections$])),_.Kf(([a,b])=>this.fetchConnections(a,b)),_.Of(a=>{1>(null==a?void 0:a.length)||(a=null==a?void 0:a[0],(null==a?0:a.aws)?this.createTableFormArray.controls.awsConnection.setValue(a):(null==a?0:a.azure)?this.createTableFormArray.controls.azureConnection.setValue(a):(null==a?0:a.cloudResource)&&this.createTableFormArray.controls.cloudResourceConnection.setValue(a))}),
_.cf(a=>{this.errorService.handleError(a,"Unexpected error",_.o1({error:a}));return _.B([])}),_.Gf(1),_.Mf(this.destroy$));this.selectedCloudResourceConnection.valueChanges.subscribe(a=>{a?this.cloudResourceConnection.setValidators(_.Qv):_.rS(this.cloudResourceConnection);this.cloudResourceConnection.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};DBl.\u0275fac=function(a){return new (a||DBl)(_.A(_.gw,8),_.A(_.z_),_.A(_.T5),_.A(_.mx),_.A(_.pO),_.A(_.Cv))};
DBl.\u0275cmp=_.n({type:DBl,selectors:[["bq-create-table-form-destination"]],inputs:{tableTypeOptions:"tableTypeOptions",selectedSource:"selectedSource"},features:[_.Bg([_.cY],[_.cY])],decls:21,vars:19,consts:function(){return[" Destination\n",["type","warning",4,"ngIf"],["formGroupName","location",3,"requireNewTable","cfcCalloutStepTarget"],["aria-labelledby","table-type-label","formControlName","selectedTableType"],[3,"value",4,"ngFor","ngForOf"],["id","table-type-label"]," Table type ",["matSuffix",
"",1,"cfc-pre-wrap"]," Native tables are tables backed by native BigQuery storage. External tables are tables backed by storage external to BigQuery. \ufffd#12\ufffd Learn more \ufffd/#12\ufffd",["aria-label","Learn more about tables intro","cfcTrackedEvent","","target","_blank","track-type","navigateTo","track-name","bqTablesIntroDocumentation",3,"cfcDocLink"],[4,"ngIf"],["type","warning"],[3,"value"],["aria-labelledby","s3-connection-label","formControlName","awsConnection","cfcDisable","","required",
"",3,"cfcIamCheck"],[3,"value","click"],["primary","Create a new S3 connection","secondary","Launches a form to create a new AWS S3 connection before continuing"],["id","s3-connection-label"]," Connection ID ",["aria-labelledby","abs-connection-label","formControlName","azureConnection","cfcDisable","","required","",3,"cfcIamCheck"],["primary","Create a new ABS connection","secondary","Launches a form to create a new Azure Blob Storage connection before\n          continuing"],["id","abs-connection-label"],
" Connection ID ",["type","informational"]," Regional / dual region GCS buckets are recommended for External table. ",["formControlName","selectedCloudResourceConnection"]," Create a BigLake table using a Cloud Resource connection ",["aria-labelledby","gcs-connection-label","formControlName","cloudResourceConnection","cfcDisable","",3,"cfcIamCheck"],["primary","Create a new Cloud Resource connection","secondary","Launches a form to create a new CLOUD_RESOURCE connection before\n          continuing"],
["id","gcs-connection-label"]," Connection ID "," You do not have the necessary permissions to get the connections for the selected project.\n"]},template:function(a,b){a&1&&(_.H(0,"h2"),_.M(1,0),_.I(),_.R(2,Azl,3,1,"cfc-message",1),_.V(3,"async"),_.J(4,"bq-table-picker",2),_.H(5,"mat-form-field")(6,"cfc-select",3),_.R(7,Bzl,3,4,"mat-option",4),_.I(),_.H(8,"mat-label",5),_.M(9,6),_.I(),_.H(10,"cfc-help-button",7),_.lg(11,8),_.J(12,"a",9),_.mg(),_.I()(),_.R(13,Fzl,9,6,"ng-container",10),_.V(14,"async"),
_.R(15,Hzl,9,6,"ng-container",10),_.V(16,"async"),_.R(17,Kzl,7,1,"ng-container",10),_.V(18,"async"),_.R(19,Lzl,2,0,"p",10),_.V(20,"async"));a&2&&(_.z(2),_.E("ngIf",_.W(3,9,b.incorrectDatasetLocation$)),_.z(2),_.E("requireNewTable",!1)("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_DESTINATION_SECTION_STEP),_.z(3),_.E("ngForOf",b.tableTypeOptions),_.z(5),_.E("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_TABLES_INTRO),_.z(1),_.E("ngIf",!0===_.W(14,11,b.isS3Source$)),_.z(2),_.E("ngIf",!0===_.W(16,13,b.isAbsSource$)),
_.z(2),_.E("ngIf",b.isExternalTable&&!0===_.W(18,15,b.isGcsSource$)),_.z(2),_.E("ngIf",!1===_.W(20,17,b.canGetConnections$)))},dependencies:[_.Dv,_.mA,_.jp,_.kp,_.nA,_.bL,_.sJ,_.wy,_.DG,_.Qy,_.Ry,_.Oy,_.dy,_.fy,_.Au,_.wu,_.xu,_.vs,_.ws,_.Uv,_.Vv,_.lw,_.iw,_.gw,_.hz,_.qk,_.lz,_.mz,_.p9,_.qp,BBl,CBl,ABl,zBl],encapsulation:2});var EBl=class{get createTableFormArray(){return this.parentFormGroupName.control}constructor(a){this.parentFormGroupName=a;this.schema={}}};EBl.\u0275fac=function(a){return new (a||EBl)(_.A(_.gw,8))};
EBl.\u0275cmp=_.n({type:EBl,selectors:[["bq-create-table-form-partition"]],inputs:{schema:"schema"},features:[_.Bg([_.cY],[_.cY])],decls:4,vars:1,consts:function(){return[" Partition and cluster settings\n",["formGroupName","partitioning",3,"schema"],["formGroupName","clustering"]]},template:function(a,b){a&1&&(_.H(0,"h2"),_.M(1,0),_.I(),_.J(2,"bq-partition-builder",1)(3,"bq-clustering-picker",2));a&2&&(_.z(2),_.E("schema",b.schema))},dependencies:[ZAl,fBl,_.Vv,_.gw],encapsulation:2});var FBl=class{get createTableFormArray(){return this.parentFormGroupName.control}get shouldAutoDetectSchema(){return this.createTableFormArray.get("shouldAutoDetectSchema")}get allowUserSchema(){return Qyl(this.selectedSource,this.sourceFormat,this.selectedTableType)}get isEmptyTable(){return Vyl(this.selectedSource)}constructor(a){this.parentFormGroupName=a;this.selectedSource="EMPTY_TABLE";this.allowTypeParameters=!1;this.selectedTableType="NATIVE"}};
FBl.\u0275fac=function(a){return new (a||FBl)(_.A(_.gw,8))};
FBl.\u0275cmp=_.n({type:FBl,selectors:[["bq-create-table-form-schema"]],inputs:{selectedSource:"selectedSource",sourceFormat:"sourceFormat",allowTypeParameters:"allowTypeParameters",selectedTableType:"selectedTableType"},features:[_.Bg([_.cY],[_.cY])],decls:4,vars:2,consts:function(){return["Schema",[4,"ngIf"],["type","informational"]," Source file defines the schema. ",["formGroupName","schema",4,"ngIf"],["instrumentationId","bq-create-table-form-auto-detect"],["formControlName","shouldAutoDetectSchema",
"spotlightId","bq-create-table-form-auto-detect"]," Auto detect"," Schema will be automatically generated. ",["formGroupName","schema"],[3,"allowTypeParameters","fieldNameMaxLength"]]},template:function(a,b){a&1&&(_.H(0,"h2"),_.M(1,0),_.I(),_.R(2,Ozl,4,0,"div",1),_.R(3,Szl,3,2,"div",1));a&2&&(_.z(2),_.E("ngIf",!b.allowUserSchema),_.z(1),_.E("ngIf",b.allowUserSchema))},dependencies:[_.w6,_.Dv,_.kp,_.DO,_.Qy,_.Ry,_.Oy,_.vs,_.ws,_.Uv,_.Vv,_.iw,_.gw,_.oT],encapsulation:2});var vAl=/^s3:\/\/.+$/,wAl=/^azure:\/\/.+\.blob\.core\.windows\.net\/.+$/,uAl=/^https:\/\/drive\.google\.com\/open\?id=.+$|^https:\/\/docs\.google\.com\/spreadsheets\/d\/.+$/,GBl=a=>a.filter(([,b])=>b).map(([b])=>b),HBl=class{get createTableFormArray(){return this.parentFormGroupName.control}get selectedSource(){return this.createTableFormArray.get("selectedSource")}get selectedFile(){return this.createTableFormArray.get("selectedFile")}get selectedFileFormat(){return this.createTableFormArray.get("selectedFileFormat")}get gcsLocation(){return this.createTableFormArray.get("gcsLocation")}get selectedHivePartitioning(){return this.createTableFormArray.get("selectedHivePartitioning")}get isS3Source(){return"S3"===
this.selectedSource.value}get isABSSource(){return"ABS"===this.selectedSource.value}get canSelectFileFormat(){return!this.isEmptyTable&&"BIGTABLE"!==this.selectedSource.value}get canHivePartition(){var a=this.selectedSource.value;return"GCS"===a||"S3"===a||"ABS"===a}get isGoogleSheets(){return Tyl(this.selectedFileFormat.value,this.selectedSource.value)}get isEmptyTable(){return Vyl(this.selectedSource.value)}constructor(a,b,c){this.parentFormGroupName=a;this.dl={CONSOLE__BIGQUERY_DOCS_CREATE_BIGTABLE_EXTERNAL_TABLE:OAl,
CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_DATASTORE_LOADING_CLOUD_DATASTORE_BACKUP_DATA:PAl,CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL:QAl,CONSOLE__BIGQUERY_EXTERNAL_DATA_BIGTABLE:UAl,CONSOLE__BIGQUERY_EXTERNAL_DATA_CLOUD_STORAGE_WILDCARD_SUPPORT:VAl};this.tableType="NATIVE";this.MSG_GCS_PICKER_TITLE_FORM="Choose a file";this.ADD_DATA_GUIDE_SOURCE_SECTION_STEP="bq-add-data-guide-source-section";this.SOURCE=WAl;this.SOURCE_FORMAT=jBl;this.bigtableToBigqueryEnabled=_.Lc("BigtableToBigquery__enabled");
this.fileFormatOptions$=_.B(kBl);this.destroy$=new _.Ef;this.sourceOptions=_.Ge(["IMPORT_FILE","IMPORT_FROM_DRIVE","CONNECTIONS","BIGTABLE"].map(d=>_.k0(b,d))).pipe(_.D(([d,e,f,g])=>GBl([["EMPTY_TABLE",!0],["GCS",!0],["UPLOAD",d],["DRIVE",e],["BIGTABLE",g],["S3",f],["ABS",f]])));this.gcsBucketFilterPredicate=_.TJi(c)}ngOnInit(){var a=this.selectedSource.valueChanges.pipe(_.Jf(this.selectedSource.value),_.Gf(1),_.Mf(this.destroy$));a.subscribe(e=>{tAl(this.createTableFormArray,e)});this.fileFormatOptions$=
a.pipe(_.D(e=>({newSource:e,fileFormatOptions:kBl.filter(f=>!f.forbiddenSources.has(e))})),_.Of(({newSource:e,fileFormatOptions:f})=>{const g=kBl.find(l=>l.format===this.selectedFileFormat.value);g&&g.forbiddenSources.has(e)&&this.selectedFileFormat.setValue(f[0].format)}),_.D(({fileFormatOptions:e})=>e));a=this.gcsLocation.valueChanges.pipe(_.Mf(this.destroy$));const b=this.createTableFormArray.get("s3Path").valueChanges.pipe(_.Mf(this.destroy$)),c=this.createTableFormArray.get("absPath").valueChanges.pipe(_.Mf(this.destroy$)),
d=this.selectedFile.valueChanges.pipe(_.Mf(this.destroy$),_.We(e=>!!e),_.D(e=>{let f;return e instanceof Array?null==(f=e[0])?void 0:f.name:e.name}));_.Ve(a,d,b,c).pipe(_.We(e=>!!e),_.Sf(this.fileFormatOptions$)).subscribe(([e,f])=>{for(const g of f)g.suffix&&e.toLowerCase().endsWith(g.suffix)&&this.selectedFileFormat.setValue(g.format)})}ngOnDestroy(){this.destroy$.next()}};HBl.\u0275fac=function(a){return new (a||HBl)(_.A(_.gw,8),_.A(_.l0),_.A(_.M5))};
HBl.\u0275cmp=_.n({type:HBl,selectors:[["bq-create-table-form-source"]],inputs:{tableType:"tableType"},features:[_.Bg([_.cY],[_.cY])],decls:21,vars:16,consts:function(){let a;a=_.qg("[\ufffd#9\ufffd|\ufffd#10\ufffd]Select the location of your file in Google Cloud Storage.[\ufffd/#9\ufffd|\ufffd/#10\ufffd][\ufffd#9\ufffd|\ufffd#10\ufffd] You can use a wildcard to load multiple files, for example \ufffd#11\ufffdmybucket/path/to/my*\ufffd/#11\ufffd[\ufffd/#9\ufffd|\ufffd/#10\ufffd]");let b;b=_.qg(" Upload a local file of up to 100 MB. For larger files, first upload data into \ufffd#8\ufffd Google Cloud Storage [\ufffd/#8\ufffd|\ufffd/#9\ufffd], and then create a table from GCS. \ufffd#9\ufffd Learn more [\ufffd/#8\ufffd|\ufffd/#9\ufffd]");
let c;c=_.qg(" Local uploads are limited to 100 MB. Please use \ufffd#2\ufffd Google Cloud Storage [\ufffd/#2\ufffd|\ufffd/#3\ufffd] for larger files. \ufffd#3\ufffd Learn more [\ufffd/#2\ufffd|\ufffd/#3\ufffd]");let d;d=_.qg("[\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]Specify a Drive file URI in one of the following forms:[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]https://drive.google.com/open?id=[file_id][\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]https://docs.google.com/spreadsheets/d/[file_id] (for Google Sheets)[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]To access a Google Drive file URI:[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd]\ufffd#10\ufffd[\ufffd#11\ufffd|\ufffd#13\ufffd]Go to \ufffd#12\ufffdGoogle Drive\ufffd/#12\ufffd.[\ufffd/#11\ufffd|\ufffd/#13\ufffd][\ufffd#11\ufffd|\ufffd#13\ufffd]Right-click on the file and select \ufffd#14\ufffdGet shareable link\ufffd/#14\ufffd.[\ufffd/#11\ufffd|\ufffd/#13\ufffd]\ufffd/#10\ufffd");
let e;e=_.qg(" Drive URI must take one of the following forms: 'https://drive.google.com/open?id=[\ufffd#2\ufffd|\ufffd#3\ufffd][file id][\ufffd/#2\ufffd|\ufffd/#3\ufffd]', 'https://docs.google.com/spreadsheets/d/[\ufffd#2\ufffd|\ufffd#3\ufffd][file id][\ufffd/#2\ufffd|\ufffd/#3\ufffd]' (for Google Sheets). ");let f;f=_.qg("\ufffd*3:1\ufffd\ufffd#1:1\ufffd You can now use the Google Cloud console to \ufffd#2:1\ufffd create an external table[\ufffd/#2:1\ufffd|\ufffd/#1:2\ufffd] to use with BigQuery. This feature simplifies the external table creation process by letting BigQuery automatically infer the schema of your Bigtable table and then use it to generate the schema of the external table. You can then use BigQuery to query your Bigtable data. \ufffd/#1:1\ufffd\ufffd/*3:1\ufffd\ufffd*4:2\ufffd Bigtable is now an approved external data source available to BigQuery through the CLI. Check out the \ufffd#1:2\ufffd Querying Bigtable data[\ufffd/#2:1\ufffd|\ufffd/#1:2\ufffd] guide to learn how to create this connection. \ufffd/*4:2\ufffd");
let g;g=_.qg('[\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd] Optionally indicate which sheet and cell range in the Google Sheets spreadsheet to create a table from. You can specify: [\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd][\ufffd#8\ufffd|\ufffd#10\ufffd][sheet_title][\ufffd/#8\ufffd|\ufffd/#10\ufffd] for the whole sheet, or[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd][\ufffd#8\ufffd|\ufffd#10\ufffd][sheet_title]![top_left_cell_id]:[bottom_right_cell_id][\ufffd/#8\ufffd|\ufffd/#10\ufffd] for a rectangular cell range in a sheet, such as "Sheet1!A1:B20". [\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd]When this is not specified, the first sheet in the spreadsheet is used.[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd]');
return[[1,"cfc-space-above-minus-6"]," Source\n",["spotlightId","bq-create-table-form-create-table-from"],["aria-labelledby","source-label","formControlName","selectedSource"],[3,"value",4,"ngFor","ngForOf"],["id","source-label"]," Create table from ",[3,"cfcCalloutStepTarget"],[3,"ngSwitch"],["storageLocationPicker","","uriType","object","rwMode","createOrUpdate","spotlightId","bq-create-table-form-select-gcs-bucket",3,"bucketFilterPredicate",4,"ngSwitchCase"],[4,"ngSwitchCase"],["spotlightId","bq-create-table-form-file-format",
4,"ngIf"],[4,"ngIf"],["formGroupName","partition",4,"ngIf"],[3,"value"],["storageLocationPicker","","uriType","object","rwMode","createOrUpdate","spotlightId","bq-create-table-form-select-gcs-bucket",3,"bucketFilterPredicate"],["matPrefix",""],"formControlName gcsLocation storageLocationPickerInput  matInput  required ".split(" "),["matSuffix","",3,"titleOverride"]," Select file from GCS bucket or \ufffd#6\ufffd use a URI pattern \ufffd/#6\ufffd",["target","_blank","rel","noopener",3,"cfcDocLink"],
["matSuffix","","ariaLabel","Help button for GCS file selection",1,"cfc-pre-wrap"],a,["matError","",4,"cfcDebounceErrorFor"],["matError",""]," Invalid GCS location selected ",["formControlName","selectedFile","required",""],["picker",""],["matSuffix","",3,"filePicker"]," Select file ",["matSuffix","","ariaLabel","Help button for file selection"],b,["cfcRouterLink","/storage/browser","target","_blank"],["aria-label","Learn more about loading local data in BigQuery","cfcTrackedEvent","","track-type",
"navigateTo","track-name","bqCreateTableLoadingLocalDataDocumentation","target","_blank",3,"cfcDocLink"],c,["cfcRouterLink","/browser","target","_blank"],["aria-label","Learn more about loading local data in BigQuery","cfcTrackedEvent","","track-type","navigateTo","track-name","bqCreateTableLoadingLocalDataDocumentation","target","_blank",3,"cfcDocLink"]," Invalid file selected ","formControlName driveUri matInput  required ".split(" ")," Select Drive URI ",["matSuffix","","ariaLabel","Help button for providing Drive URIs"],
d,["target","_blank","href","https://drive.google.com/"],e," Drive URI missing ","formControlName s3Path matInput  required ".split(" ")," Select S3 path ",["matSuffix","","ariaLabel","Help button for providing S3 path"],"\ufffd#6\ufffdSpecify an Amazon S3 path using the S3 format. For example: s3://mybucket/*\ufffd/#6\ufffd",' Path should start with "s3://". Please see the help tooltip for the correct format. '," S3 path missing ",["formControlName","absPath","matInput",""]," Select Azure Blob Storage path ",
["matSuffix","","ariaLabel","Help button for providing Azure Blob Storage path"],"\ufffd#6\ufffd Specify an Azure Blob Storage path using the Azure Blob Storage format. For example: azure://mystorageaccount.blob.core.windows.net/mycontainer/* \ufffd/#6\ufffd"," Invalid path format. Please see the help tooltip for the correct format. "," Azure Blob Storage path missing ",["spotlightId","bq-create-table-form-file-format"],["aria-labelledby","file-format-label","formControlName","selectedFileFormat"],
["id","file-format-label"]," File format ",["type","informational"],f,[4,"ngIf","ngIfElse"],["bigtableToBigqueryDisabled",""],["cfcTrackedEvent","","track-type","navigateTo","track-name","bqExternalTableBigtable","target","_blank",3,"cfcDocLink"],["cfcTrackedEvent","","track-type","navigateTo","track-name","bqExternalDataBigtable","target","_blank",3,"cfcDocLink"],["formControlName","selectedHivePartitioning"]," Source Data Partitioning ",["formGroupName","partition"],[3,"tableType"],["formControlName",
"sheetRange","matInput",""]," Sheet range ",["matSuffix","","ariaLabel","Help button for providing sheet and cell range"],g," To load a table from Cloud Datastore or a backup refer to the steps in the documention. \ufffd#3\ufffdLearn more\ufffd/#3\ufffd",["aria-label","Learn more about loading table from a Cloud Datastore","cfcTrackedEvent","","track-type","navigateTo","track-name","bqCreateTableAllowJaggedRowsDocumentation","target","_blank",3,"cfcDocLink"]]},template:function(a,b){a&1&&(_.H(0,"h2",
0),_.M(1,1),_.I(),_.H(2,"mat-form-field",2)(3,"cfc-select",3),_.R(4,Vzl,3,4,"mat-option",4),_.V(5,"async"),_.I(),_.H(6,"mat-label",5),_.M(7,6),_.I()(),_.H(8,"div",7),_.K(9,8),_.R(10,Yzl,14,5,"mat-form-field",9),_.R(11,aAl,12,4,"mat-form-field",10),_.R(12,dAl,17,2,"mat-form-field",10),_.R(13,gAl,9,2,"mat-form-field",10),_.R(14,jAl,9,2,"mat-form-field",10),_.L(),_.R(15,lAl,6,3,"mat-form-field",11),_.I(),_.R(16,oAl,6,2,"cfc-message",12),_.R(17,pAl,3,0,"div",12),_.R(18,qAl,2,1,"div",13),_.R(19,rAl,12,
0,"mat-form-field",12),_.R(20,sAl,4,1,"cfc-message",12));a&2&&(_.z(4),_.E("ngForOf",_.W(5,14,b.sourceOptions)),_.z(4),_.E("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_SOURCE_SECTION_STEP),_.z(1),_.E("ngSwitch",b.selectedSource.value),_.z(1),_.E("ngSwitchCase",b.SOURCE.GCS),_.z(1),_.E("ngSwitchCase",b.SOURCE.UPLOAD),_.z(1),_.E("ngSwitchCase",b.SOURCE.DRIVE),_.z(1),_.E("ngSwitchCase",b.SOURCE.S3),_.z(1),_.E("ngSwitchCase",b.SOURCE.ABS),_.z(1),_.E("ngIf",b.canSelectFileFormat),_.z(1),_.E("ngIf",b.selectedSource.value===
b.SOURCE.BIGTABLE),_.z(1),_.E("ngIf",b.canHivePartition),_.z(1),_.E("ngIf",b.canHivePartition&&!0===b.selectedHivePartitioning.value),_.z(1),_.E("ngIf",b.isGoogleSheets),_.z(1),_.E("ngIf",b.selectedFileFormat.value===b.SOURCE_FORMAT.DATASTORE_BACKUP))},dependencies:[_.Dv,_.mA,_.jp,_.kp,_.lp,_.mp,_.fK,_.bL,_.sJ,_.mV,_.nV,_.wy,bBl,_.G5,_.E5,_.F5,_.J5,_.Qy,_.Ry,_.Oy,_.dy,_.eK,_.fy,_.Au,_.wu,_.dK,_.WH,_.xu,_.my,_.ny,_.ky,_.vs,_.ws,_.Xj,_.Uv,_.Vv,_.lw,_.iw,_.gw,_.Gy,_.hz,_.qk,_.lz,_.oT,_.qp,yBl],encapsulation:2});var BAl=function(a){return{schema:a}},IBl=class{get billingProjectId(){return _.Jt(this.projectParamService)}get createTableFormArray(){return this.parentFormGroupName.control}get sourceGroup(){return this.createTableFormArray.controls.source}get destinationGroup(){return this.createTableFormArray.controls.destination}get selectedSource(){return this.sourceGroup.get("selectedSource")}get selectedTableType(){return this.destinationGroup.get("selectedTableType")}get selectedFileFormat(){return this.sourceGroup.get("selectedFileFormat")}get isS3Source(){return"S3"===
this.selectedSource.value}get isABSSource(){return"ABS"===this.selectedSource.value}get canSourceHaveDestination(){return"BIGTABLE"!==this.selectedSource.value}get sourceHasAdvancedOptions(){return"BIGTABLE"!==this.selectedSource.value&&!this.isS3Source&&!this.isABSSource}get isNativeTable(){return"NATIVE"===this.selectedTableType.value}get allowTypeParameters(){return _.Uvg&&this.isNativeTable}constructor(a,b,c){this.parentFormGroupName=a;this.panTrustedTesterService=b;this.projectParamService=c;
this.SOURCE=WAl;this.tableTypeOptions$=_.B(["NATIVE"]);this.destroy$=new _.Ef}ngOnInit(){this.panTrustedTesterService.isTrustedTester(this.billingProjectId,260).pipe(_.nf(1),_.Of(()=>{})).subscribe();const a=this.destinationGroup.get("location");this.tableLocation$=_.Ve(_.B(a.value),a.valueChanges).pipe(_.D(b=>{var c=null==b?void 0:b.dataset;return{projectId:(null==b?void 0:b.projectId)||"",datasetId:(c?c.datasetId||"":"")||"",tableId:(null==b?void 0:b.tableId)||""}}),_.cf(()=>_.B(void 0)));this.tableTypeOptions$=
this.selectedSource.valueChanges.pipe(_.Jf(this.selectedSource.value),_.Mf(this.destroy$),_.D(b=>{switch(b){case "EMPTY_TABLE":case "UPLOAD":return["NATIVE"];case "DRIVE":case "BIGTABLE":case "S3":case "ABS":return["EXTERNAL"];default:return["NATIVE","EXTERNAL"]}}),_.Of(b=>{this.selectedTableType.setValue(b[0]||"NATIVE")}));this.schemaDebounced$=this.createTableFormArray.controls.schema.valueChanges.pipe(_.gf(500),_.D(()=>Uzl(this.createTableFormArray.controls.schema).schema))}ngOnDestroy(){this.destroy$.next()}};
IBl.\u0275fac=function(a){return new (a||IBl)(_.A(_.gw,8),_.A(_.ZO),_.A(_.Kt))};
IBl.\u0275cmp=_.n({type:IBl,selectors:[["bq-create-table-form"]],viewQuery:function(a,b){a&1&&_.Rg(xBl,5);if(a&2){let c;_.Qg(c=_.Tg())&&(b.advancedFormInstance=c.first)}},features:[_.Bg([_.cY],[_.cY])],decls:4,vars:4,consts:[["formGroupName","source",3,"tableType"],[4,"ngIf"],["formGroupName","destination",3,"selectedSource","tableTypeOptions"],["formGroupName","schema",3,"selectedSource","sourceFormat","allowTypeParameters","selectedTableType"],["formGroupName","partition",3,"schema"],["formGroupName",
"advanced",3,"source","sourceFormat","tableType","tableLocation"]],template:function(a,b){a&1&&(_.H(0,"section"),_.J(1,"bq-create-table-form-source",0),_.I(),_.R(2,EAl,5,4,"ng-container",1),_.V(3,"async"));a&2&&(_.z(1),_.E("tableType",b.selectedTableType.value),_.z(1),_.E("ngIf",_.W(3,2,b.tableTypeOptions$)))},dependencies:[_.kp,_.Vv,_.gw,xBl,DBl,EBl,FBl,HBl,_.qp],encapsulation:2});var JBl=[_.Lv,_.bB,aBl,_.d1i,_.wp,_.mK,tBl,_.XA,_.Iw,_.tJ,_.oV,_.FV,_.yy,dBl,_.EG,_.EO,_.t1,_.K5,_.Sy,_.gy,_.oy,_.Fs,_.xV,iBl,_.g1i,wBl,_.sw,_.Iy,_.qz,_.pT,_.q9,_.BV],KBl=class{};KBl.\u0275fac=function(a){return new (a||KBl)};KBl.\u0275mod=_.r({type:KBl,id:"pm_bigquery_create_table_form"});KBl.\u0275inj=_.k({imports:[_.hA,_.x6,JBl]});_.Vf(KBl,"pm_bigquery_create_table_form");var NBl=function(a,b){const c={configuration:{load:oBl(nBl(mBl(pBl(lBl(new qBl(b)))))).build()}};return _.Pe([LBl(a,c),!b.shouldAutoDetectSchema&&"WRITE_APPEND"===b.selectedWriteDisposition&&b.tableLocation?a.bqTablesFacadeService.getTable(b.tableLocation):_.B(void 0)]).pipe(_.Kf(([d,e])=>{c.jobReference=d;const f=null==d?void 0:d.projectId;let g;const l=b.selectedFile instanceof Array?null==(g=b.selectedFile)?void 0:g[0]:b.selectedFile;let p;e&&(null==c?0:null==(p=c.configuration)?0:p.load)&&(c.configuration.load.schema=
e.schema);return l?a.jobsFacadePerJobPollingService.insertMediaUpload(l,f,c):_.d2(a.jobsFacadePerJobPollingService,f,{jobReference:d,serverModel:c})}),_.We(d=>0!==d.uiStatus),_.Of(d=>{MBl(a,d)}),_.qf(d=>a.jobsFacadePerJobPollingService.clientJobIsComplete(d)),_.Of(d=>{5===d.uiStatus&&(MAl(a.analyticsService,b.selectedSource,b.selectedFileFormat,b.selectedTableType),a.subtaskRef.accept(d.job))}),_.D(d=>d.job))},OBl=function(a,b){let c;null==(c=a.calloutStepTargetService.get(b))||c.nativeElement.scrollIntoView({block:"end"})},
PBl=function(a,b){const {info:c,subtaskConfig:d}=_.qqh({data:{job:b}});a.subtaskService.open(c,d).subscribe()},QBl=function(a,b,c,d){a.snackBarService.openWithMultipleActions(b,{actions:[{label:c,dismissOnPress:!0,action:()=>{d()}}]})},MBl=function(a,b){switch(b.uiStatus){case 2:QBl(a,"Load job created.","Go to job",()=>{PBl(a,b.job)});break;case 5:var c;let d,e,f;const g=null==(c=b.job)?void 0:null==(d=c.serverModel)?void 0:null==(e=d.configuration)?void 0:null==(f=e.load)?void 0:f.destinationTable;
c=_.Ij('"{TABLE_NAME}" created.',{TABLE_NAME:(null==g?void 0:g.tableId)||""});QBl(a,c,"Go to table",()=>{_.b_(g)||a.snackBarService.open("Unexpected error");a.tabService.openTableDetailsTab(g)});break;case 4:let l;if(null==(l=b.job)?0:l.serverModel){let p,u,v,w;QBl(a,_.Ij("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:(null==(p=b.job)?void 0:null==(u=p.serverModel)?void 0:null==(v=u.status)?void 0:null==(w=v.errorResult)?void 0:w.message)||"Unexpected error"}),"Go to job",()=>{PBl(a,b.job)})}}},
LBl=function(a,b){var c;if(null==(c=b.jobReference)?0:c.location)return _.B(b.jobReference);let d;c=null==(d=(null==b?void 0:b.configuration).load)?void 0:d.destinationTable;return _.y_(a.datasetsFacadeService,{datasetId:(null==c?void 0:c.datasetId)||"",projectId:(null==c?void 0:c.projectId)||""}).pipe(_.D(e=>({projectId:_.Jt(a.projectParamService),location:e.location,jobId:b.id})))},RBl=class{constructor(a,b,c,d,e,f,g,l,p,u,v,w,y,C,F){this.data=a;this.subtaskRef=b;this.errorService=c;this.snackBarService=
d;this.bqTablesFacadeService=e;this.datasetsFacadeService=f;this.jobsFacadePerJobPollingService=g;this.projectParamService=l;this.subtaskService=p;this.tabService=u;this.fb=v;this.ref=w;this.guidesService=y;this.calloutStepTargetService=C;this.analyticsService=F;this.title="Create table";this.ADD_DATA_GUIDE_SUBMIT_BUTTON_STEP="bq-add-data-guide-submit-button";this.isAddDataGuideActive=this.isLoadingJob=!1;this.destroyed$=new _.Bf(1);this.submit=()=>_.B(void 0).pipe(_.Kf(()=>{var G;null==(G=this.form)||
G.markAllAsTouched();let T;if(null==(T=this.form)||!T.valid)return _.B(void 0);G=HAl(this.form.get("table"));this.analyticsService.sendEvent({type:"bqTableCreate",name:"trackCreateTableSubmit",metadata:{source:G.selectedSource,fileFormat:G.selectedFileFormat,tableType:G.selectedTableType}});return"EMPTY_TABLE"===G.selectedSource||"EXTERNAL"===G.selectedTableType?this.createTable(G):NBl(this,G)}),_.cf(G=>{const T=_.Ij("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:_.n1(G)});G.message=T;this.errorService.handleError(G,
T,_.o1({error:G,configuration:{presentationFormat:2}}));return _.B(void 0)}));this.ve={BqSubtaskCreateTablePanelBody:154790,BqSubtaskCreateTablePanelFooter:154791,BqSubtaskCreateTableActionBar:154789};_.B(this.data).pipe(_.Kf(G=>{if(!G.jobId)return _.B(LAl({data:G}));const T=_.S2g(G.jobId);if(!T)throw Error("bw");this.isLoadingJob=!0;return this.jobsFacadePerJobPollingService.getJob(T).pipe(_.D(aa=>{let Z,da;aa=null==aa?void 0:null==(Z=aa.serverModel)?void 0:null==(da=Z.configuration)?void 0:da.load;
return LAl({data:G,loadJobConfig:aa})}))}),_.qf(),_.D(G=>{this.isLoadingJob=!1;try{this.form=this.createForm(G),this.ref.markForCheck()}catch(T){}}),_.cf(G=>{this.isLoadingJob=!1;this.errorService.handleError(G,"Unexpected error",_.o1({error:G,configuration:{presentationFormat:2}}));return _.B(void 0)})).subscribe();this.guidesService.activeGuide$.pipe(_.nf(1)).subscribe(G=>{(this.isAddDataGuideActive="bq-add-data-guide-id"===(null==G?void 0:G.id))&&this.prepareSubtaskForAddDataGuide()})}ngOnDestroy(){this.destroyed$.next();
this.destroyed$.complete()}prepareSubtaskForAddDataGuide(){_.m9(this.guidesService,"bq-add-data-guide-source-section",!1);_.m9(this.guidesService,"bq-add-data-guide-destination-section",!1);_.n9(this.guidesService,["bq-add-data-guide-data-source"]).pipe(_.Mf(this.destroyed$),_.nf(1)).subscribe(()=>{_.F5c(this.subtaskRef)});_.n9(this.guidesService,["bq-add-data-guide-source-section","bq-add-data-guide-destination-section"]).pipe(_.Mf(this.destroyed$)).subscribe(a=>{OBl(this,a)});this.subtaskRef.afterOpen.pipe(_.nf(1)).subscribe(()=>
{OBl(this,"bq-add-data-guide-source-section");_.m9(this.guidesService,"bq-add-data-guide-source-section",!0);_.m9(this.guidesService,"bq-add-data-guide-destination-section",!0);_.m9(this.guidesService,"bq-add-data-guide-data-source",!1)});this.subtaskRef.afterClosed.pipe(_.nf(1)).subscribe(()=>{_.m9(this.guidesService,"bq-add-data-guide-data-source",!0)})}get buttonDisabled(){return this.form?"BIGTABLE"===HAl(this.form.get("table")).selectedSource:!0}cancel(){this.subtaskRef.cancel()}createTable(a){const b=
azl(a);return _.B(b.tableReference).pipe(_.Kf(c=>_.b_(c)?this.bqTablesFacadeService.createTable(b):_.xe("Something went wrong. A valid table reference could not be found.")),_.qf(),_.Of(c=>{let d;const e=_.Ij('"{TABLE_NAME}" created.',{TABLE_NAME:(null==c?void 0:null==(d=c.tableReference)?void 0:d.tableId)||""});this.snackBarService.openWithMultipleActions(e,{actions:[{label:"Go to table",dismissOnPress:!0,action:()=>{var f=null==c?void 0:c.tableReference;_.b_(f)||this.snackBarService.open("Unexpected error");
this.tabService.openTableDetailsTab(f)}}]});MAl(this.analyticsService,a.selectedSource,a.selectedFileFormat,a.selectedTableType);this.subtaskRef.accept(c)}),_.cf(c=>{const d=_.Ij("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:_.n1(c)});c.message=d;this.errorService.handleError(c,d,_.o1({error:c,configuration:{presentationFormat:2}}));return _.B(void 0)}))}createForm(a){a=FAl({fb:this.fb,model:a});return this.fb.group({table:a})}};
RBl.\u0275fac=function(a){return new (a||RBl)(_.A(_.aK,8),_.A(_.$J),_.A(_.mx),_.A(_.Yw),_.A(_.A_),_.A(_.z_),_.A(_.e2),_.A(_.Kt),_.A(_.pO),_.A(_.X1),_.A(_.qw),_.A(_.dp),_.A(_.o9),_.A(_.lA),_.A(_.w1))};
RBl.\u0275cmp=_.n({type:RBl,selectors:[["bq-create-table-subtask"]],hostAttrs:[1,"cfc-flex-layout-column"],decls:13,vars:10,consts:function(){return[[3,"cfcTitle","ve"],[1,"cfc-action-bar-content-right"],["navType","close",3,"onClose"],[3,"ve","veImpression"],["class","pcc-loading-overlay\n             cfc-flex-layout-column\n             cfc-flex-center-aligned\n             cfc-flex-justify-center",4,"ngIf","ngIfElse"],["createTableForm",""],[3,"ve"],["mat-raised-button","","color","primary","type",
"submit","cfcFormSubmit","create-table-form",3,"cmDisabled","cfcProgressButtonClick","cfcCalloutStepTarget"]," Create table ",["mat-button","","type","button",3,"click"]," Cancel ",[1,"pcc-loading-overlay","cfc-flex-layout-column","cfc-flex-center-aligned","cfc-flex-justify-center"],["aria-label","Loading Job",3,"diameter"],["id","create-table-form",1,"cfc-max-width-full",3,"formGroup"],["formGroupName","table"]]},template:function(a,b){a&1&&(_.H(0,"cfc-action-bar",0)(1,"div",1)(2,"cfc-navigation-button",
2),_.N("onClose",function(){return b.cancel()}),_.I()()(),_.H(3,"cfc-panel-body",3),_.R(4,IAl,2,1,"div",4),_.R(5,JAl,3,1,"ng-template",null,5,_.Wg),_.I(),_.H(7,"cfc-panel-footer",6)(8,"cfc-progress-button")(9,"button",7),_.M(10,8),_.I()(),_.H(11,"button",9),_.N("click",function(){return b.cancel()}),_.M(12,10),_.I()());if(a&2){const c=_.yg(6);_.E("cfcTitle",b.title)("ve",b.ve.BqSubtaskCreateTableActionBar);_.z(3);_.E("ve",b.ve.BqSubtaskCreateTablePanelBody)("veImpression",!b.isAddDataGuideActive);
_.z(1);_.E("ngIf",b.isLoadingJob)("ngIfElse",c);_.z(3);_.E("ve",b.ve.BqSubtaskCreateTablePanelFooter);_.z(2);_.E("cmDisabled",b.buttonDisabled)("cfcProgressButtonClick",b.submit)("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_SUBMIT_BUTTON_STEP)}},dependencies:function(){return[_.ys,_.kJ,_.pJ,_.Dv,_.Jv,_.mA,_.uw,_.Vs,_.tw,_.qs,_.ns,_.js,_.kp,IBl,_.AN,_.CN,_.mP,_.Wy,_.Vy,_.cw,_.Vv,_.fw,_.gw]},encapsulation:2});var SBl={SubtaskService:_.bK,CreateTableSubtaskComponent:RBl},TBl=class{};
TBl.\u0275fac=function(a){return new (a||TBl)};TBl.\u0275mod=_.r({type:TBl,id:"pm_bigquery_create_table_subtask"});TBl.\u0275inj=_.k({providers:[{provide:_.Up,useValue:SBl}],imports:[_.cK,_.rJ,_.Lv,_.bB,_.vw,_.rs,_.wp,KBl,_.BN,_.DN,_.nP,_.FG,_.Xy,_.sw]});_.Vf(TBl,"pm_bigquery_create_table_subtask");












_.th();
}catch(e){_._DumpException(e)}
}).call(this,this.default_r_tvffkgi);
// Google Inc.
